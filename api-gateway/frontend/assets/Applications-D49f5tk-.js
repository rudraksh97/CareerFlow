import{c as de,r as d,u as nt,j as e,A as J,m as g,a as Bt,X as he,F as ke,U as it,B as Ye,b as Jt,E as Te,C as Qt,d as Gt}from"./index-0B-QrMym.js";import{u as Yt}from"./useQuery-gFyUPQ7C.js";import{u as ce}from"./useMutation-DdaFRHUm.js";import{a as K}from"./api-BgONvxhD.js";import{A as v,S as Ke}from"./index-W4XAZPlB.js";import{B as be}from"./building-C-svXhnr.js";import{C as ot,D as Xe}from"./download-BfIeGHGd.js";import{P as Kt}from"./plus-CaDpXQUP.js";import{T as Ze}from"./trending-up-CiTOepoW.js";import{T as et}from"./target-BWwjKe5t.js";import{C as Ce,F as Xt,T as tt}from"./trash-2-CzVBZmWj.js";import{A as Zt}from"./alert-circle-B5LfcZxN.js";import{T as es,C as ts,M as Re,A as ss,a as as}from"./table-NpWfy8zk.js";import{C as rs,a as st,S as at,A as ls}from"./square-Bm81cBTm.js";import{S as ns}from"./search-DuMWX5kD.js";import{M as is}from"./mail-D00ol1xp.js";import{P as rt}from"./pen-square-BwW19Awb.js";import{R as os}from"./rotate-cw-BU4PmOrm.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=de("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=de("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=de("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=de("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=de("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=de("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),$e={company_name:"",job_title:"",job_id:"",job_url:"",portal_url:"",status:"applied",priority:v.MEDIUM,date_applied:new Date().toISOString().split("T")[0],email_used:"",source:"linkedin",notes:"",resume:null,cover_letter:null},B=[{id:"basic",label:"Basic Info",icon:be,fields:["company_name","job_title","job_id","job_url","email_used"]},{id:"details",label:"Details",icon:ms,fields:["status","priority","date_applied","portal_url","source"]},{id:"documents",label:"Documents",icon:ke,fields:["resume","cover_letter"]},{id:"notes",label:"Notes",icon:it,fields:["notes"]}];function xs({isOpen:je,onClose:ue,editingApplication:N}){const[c,F]=d.useState($e),[x,O]=d.useState({}),[q,Q]=d.useState(!1),[X,G]=d.useState(!1),[M,P]=d.useState("basic"),re=nt(),H=ce({mutationFn:a=>{const l=new FormData;return l.append("company_name",a.company_name),l.append("job_title",a.job_title),l.append("job_id",a.job_id),l.append("job_url",a.job_url),a.portal_url&&l.append("portal_url",a.portal_url),l.append("status",a.status),l.append("priority",a.priority),l.append("date_applied",a.date_applied),l.append("email_used",a.email_used),l.append("source",a.source),a.notes&&l.append("notes",a.notes),a.resume&&l.append("resume",a.resume),a.cover_letter&&l.append("cover_letter",a.cover_letter),K.post("/applications/",l,{headers:{"Content-Type":"multipart/form-data"}})},onSuccess:()=>{re.invalidateQueries({queryKey:["applications"]}),re.invalidateQueries({queryKey:["dashboard-analytics"]}),U()},onError:a=>{var h,p,w;console.error("Error creating application:",a);let l="Failed to create application. Please try again.";(p=(h=a.response)==null?void 0:h.data)!=null&&p.detail?l=a.response.data.detail:(w=a.response)!=null&&w.data?l=typeof a.response.data=="string"?a.response.data:"Failed to create application. Please check your form data.":a.message&&(l=a.message),alert(l)}}),me=ce({mutationFn:({id:a,data:l})=>K.put(`/applications/${a}`,l),onSuccess:()=>{re.invalidateQueries({queryKey:["applications"]}),re.invalidateQueries({queryKey:["dashboard-analytics"]}),U()},onError:a=>{var h,p,w;console.error("Error updating application:",a);let l="Failed to update application. Please try again.";(p=(h=a.response)==null?void 0:h.data)!=null&&p.detail?l=a.response.data.detail:(w=a.response)!=null&&w.data?l=typeof a.response.data=="string"?a.response.data:"Failed to update application. Please check your form data.":a.message&&(l=a.message),alert(l)}});d.useEffect(()=>{var a;F(N?{company_name:N.company_name||"",job_title:N.job_title||"",job_id:N.job_id||"",job_url:N.job_url||"",portal_url:N.portal_url||"",status:N.status||"applied",priority:N.priority||v.MEDIUM,date_applied:((a=N.date_applied)==null?void 0:a.split("T")[0])||new Date().toISOString().split("T")[0],email_used:N.email_used||"",source:N.source||"linkedin",notes:N.notes||"",resume:null,cover_letter:null}:$e),O({}),P("basic")},[N,je]);const T=a=>a.fields.every(l=>{if(l==="notes"||l==="cover_letter"||l==="portal_url"||l==="resume"&&N)return!0;const h=c[l];return h!==""&&h!==null&&h!==void 0})?"complete":"incomplete",le=(a,l)=>a?"bg-blue-600 text-white":l?"text-red-600 bg-red-50 border border-red-200":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-50",$=(a,l,h)=>a?"bg-blue-600 w-6":l||h==="complete"?"bg-green-500":"bg-neutral-300",ne=()=>{const a={};return c.company_name.trim()||(a.company_name="Company name is required"),c.job_title.trim()||(a.job_title="Job title is required"),c.job_id.trim()||(a.job_id="Job ID is required"),c.job_url.trim()?fe(c.job_url)||(a.job_url="Please enter a valid URL"):a.job_url="Job URL is required",c.portal_url&&!fe(c.portal_url)&&(a.portal_url="Please enter a valid URL"),c.email_used.trim()?ie(c.email_used)||(a.email_used="Please enter a valid email address"):a.email_used="Email is required",c.date_applied||(a.date_applied="Application date is required"),!N&&!c.resume&&(a.resume="Resume is required for new applications"),O(a),Object.keys(a).length===0},fe=a=>{try{return new URL(a),!0}catch{return!1}},ie=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),y=async a=>{if(a.preventDefault(),!ne()){const l=B.filter(h=>h.fields.some(p=>x[p]));l.length>0&&P(l[0].id);return}Q(!0);try{N?await me.mutateAsync({id:N.id,data:{company_name:c.company_name,job_title:c.job_title,job_id:c.job_id,job_url:c.job_url,portal_url:c.portal_url||null,status:c.status,priority:c.priority,date_applied:c.date_applied,email_used:c.email_used,source:c.source,notes:c.notes||null}}):await H.mutateAsync(c)}catch{}finally{Q(!1)}},U=()=>{F($e),O({}),P("basic"),ue()},k=(a,l)=>{F(h=>({...h,[a]:l})),x[a]&&O(h=>({...h,[a]:void 0}))},xe=(a,l)=>{F(h=>({...h,[a]:l})),x[a]&&O(h=>({...h,[a]:void 0}))},z=async()=>{var a,l,h;if(c.job_url.trim()){G(!0);try{const w=(await K.post("/parse-job-url/",{url:c.job_url})).data;F(V=>({...V,company_name:w.company_name||V.company_name,job_title:w.job_title||V.job_title,job_id:w.job_id||V.job_id}))}catch(p){console.error("Error parsing job URL:",p);let w="Failed to parse job URL. Please try again.";(l=(a=p.response)==null?void 0:a.data)!=null&&l.detail?w=p.response.data.detail:(h=p.response)!=null&&h.data?w=typeof p.response.data=="string"?p.response.data:JSON.stringify(p.response.data):p.message&&(w=p.message),alert(w)}finally{G(!1)}}},ge=()=>{const a=B.findIndex(l=>l.id===M);a<B.length-1&&P(B[a+1].id)},Se=()=>{const a=B.findIndex(l=>l.id===M);a>0&&P(B[a-1].id)};return je?e.jsx(J,{children:e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:U,children:e.jsxs(g.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:"easeOut"},onClick:a=>a.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full h-[600px] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-neutral-200 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-blue-100 border border-blue-200",children:e.jsx(Bt,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:N?"Edit Application":"Add New Application"}),e.jsx("p",{className:"text-neutral-600 text-sm",children:N?"Update your job application details":"Track your job application journey"})]})]}),e.jsx("button",{type:"button",onClick:U,className:"p-2 text-neutral-400 hover:text-neutral-600 hover:bg-neutral-100 rounded-lg transition-all duration-200 focus-ring",children:e.jsx(he,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"px-6 py-3 border-b border-neutral-100 flex-shrink-0",children:e.jsx("div",{className:"flex space-x-1",children:B.map(a=>{const l=T(a),h=M===a.id,p=a.fields.some(w=>x[w]);return e.jsxs("button",{onClick:()=>P(a.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 ${le(h,p)}`,children:[e.jsx(a.icon,{className:"h-4 w-4"}),e.jsx("span",{children:a.label}),l==="complete"&&!p&&e.jsx(ot,{className:"h-4 w-4 text-green-500"}),p&&e.jsx(us,{className:"h-4 w-4 text-red-500"})]},a.id)})})}),e.jsxs("form",{onSubmit:y,className:"flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"flex-1 overflow-y-auto p-6 min-h-[350px]",children:e.jsx(J,{mode:"wait",children:e.jsxs(g.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"h-full",children:[M==="basic"&&e.jsxs("div",{className:"space-y-6 h-full",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-blue-50 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ee,{className:"h-5 w-5 text-blue-600"}),e.jsx("label",{className:"form-label mb-0 text-sm font-medium",children:"Smart Job URL Parser"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"url",value:c.job_url,onChange:a=>k("job_url",a.target.value),className:`form-input flex-1 text-sm ${x.job_url?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":""}`,placeholder:"https://company.com/careers/job-posting"}),e.jsx("button",{type:"button",onClick:z,disabled:X||!c.job_url.trim(),className:"btn-accent px-4 py-2 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed shrink-0",title:"Parse job details with AI",children:X?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"loading-accent"}),e.jsx("span",{children:"Parsing..."})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),e.jsx("span",{children:"Parse"})]})})]}),x.job_url&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:x.job_url}),e.jsx("p",{className:"text-neutral-600 text-sm mt-2",children:'Paste a job URL and click "Parse" to auto-fill the form using AI'})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label text-sm font-medium",children:"Company Name *"}),e.jsx("input",{type:"text",value:c.company_name,onChange:a=>k("company_name",a.target.value),className:`form-input text-sm ${x.company_name?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":""}`,placeholder:"Google, Microsoft"}),x.company_name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.company_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label text-sm font-medium",children:"Job Title *"}),e.jsx("input",{type:"text",value:c.job_title,onChange:a=>k("job_title",a.target.value),className:`form-input text-sm ${x.job_title?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":""}`,placeholder:"Software Engineer"}),x.job_title&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.job_title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label text-sm font-medium",children:"Job ID *"}),e.jsx("input",{type:"text",value:c.job_id,onChange:a=>k("job_id",a.target.value),className:`form-input text-sm ${x.job_id?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":""}`,placeholder:"REQ-2024-001 or unique identifier"}),x.job_id&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.job_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label text-sm font-medium",children:"Email Used *"}),e.jsx("input",{type:"email",value:c.email_used,onChange:a=>k("email_used",a.target.value),className:`form-input text-sm ${x.email_used?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":""}`,placeholder:"your.email@example.com"}),x.email_used&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.email_used})]})]})]}),M==="details"&&e.jsxs("div",{className:"space-y-6 h-full",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label text-sm font-medium",children:"Application Status"}),e.jsxs("select",{value:c.status,onChange:a=>k("status",a.target.value),className:"form-input text-sm",children:[e.jsx("option",{value:"applied",children:"Applied"}),e.jsx("option",{value:"interview",children:"Interview"}),e.jsx("option",{value:"offer",children:"Offer"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"withdrawn",children:"Withdrawn"}),e.jsx("option",{value:"pending",children:"Pending"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label text-sm font-medium",children:"Priority"}),e.jsxs("select",{value:c.priority,onChange:a=>k("priority",a.target.value),className:"form-input text-sm",children:[e.jsx("option",{value:v.LOW,children:"Low"}),e.jsx("option",{value:v.MEDIUM,children:"Medium"}),e.jsx("option",{value:v.HIGH,children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label text-sm font-medium",children:"Date Applied *"}),e.jsx("input",{type:"date",value:c.date_applied,onChange:a=>k("date_applied",a.target.value),className:`form-input text-sm ${x.date_applied?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":""}`}),x.date_applied&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.date_applied})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label text-sm font-medium",children:"Application Source"}),e.jsxs("select",{value:c.source,onChange:a=>k("source",a.target.value),className:"form-input text-sm",children:[e.jsx("option",{value:"linkedin",children:"LinkedIn"}),e.jsx("option",{value:"indeed",children:"Indeed"}),e.jsx("option",{value:"company_website",children:"Company Website"}),e.jsx("option",{value:"angelist",children:"AngelList"}),e.jsx("option",{value:"yc",children:"Y Combinator"}),e.jsx("option",{value:"glassdoor",children:"Glassdoor"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label text-sm font-medium",children:"Portal URL (Optional)"}),e.jsx("input",{type:"url",value:c.portal_url,onChange:a=>k("portal_url",a.target.value),className:`form-input text-sm ${x.portal_url?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-500/20":""}`,placeholder:"https://company.workday.com"}),x.portal_url&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.portal_url})]})]}),M==="documents"&&e.jsx("div",{className:"space-y-6 h-full",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"form-label text-sm font-medium",children:["Resume *"," ",N&&e.jsx("span",{className:"text-sm text-neutral-500",children:"(optional for updates)"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:a=>{var l;return xe("resume",((l=a.target.files)==null?void 0:l[0])||null)},className:"hidden",id:"resume-upload"}),e.jsxs("label",{htmlFor:"resume-upload",className:`form-input cursor-pointer flex items-center justify-center gap-3 h-20 border-2 border-dashed hover:border-blue-300 hover:bg-blue-50/50 transition-colors ${x.resume?"border-red-300 bg-red-50":"border-neutral-300"}`,children:[e.jsx(ke,{className:"h-5 w-5 text-neutral-400"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-neutral-600",children:c.resume?c.resume.name:"Choose resume file"}),e.jsx("p",{className:"text-xs text-neutral-500",children:"PDF, DOC, DOCX"})]})]}),x.resume&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.resume})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label text-sm font-medium",children:"Cover Letter (Optional)"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:a=>{var l;return xe("cover_letter",((l=a.target.files)==null?void 0:l[0])||null)},className:"hidden",id:"cover-letter-upload"}),e.jsxs("label",{htmlFor:"cover-letter-upload",className:"form-input cursor-pointer flex items-center justify-center gap-3 h-20 border-2 border-dashed border-neutral-300 hover:border-blue-300 hover:bg-blue-50/50 transition-colors",children:[e.jsx(ke,{className:"h-5 w-5 text-neutral-400"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-neutral-600",children:c.cover_letter?c.cover_letter.name:"Choose cover letter"}),e.jsx("p",{className:"text-xs text-neutral-500",children:"PDF, DOC, DOCX"})]})]})]})]})]})}),M==="notes"&&e.jsxs("div",{className:"h-full",children:[e.jsx("label",{className:"form-label text-sm font-medium",children:"Notes (Optional)"}),e.jsx("textarea",{value:c.notes,onChange:a=>k("notes",a.target.value),rows:10,className:"form-input resize-none text-sm w-full mt-2",placeholder:"Add any additional notes about this application, such as contact information, interview details, or follow-up reminders..."})]})]},M)})}),e.jsx("div",{className:"p-6 border-t border-neutral-200 bg-neutral-50/50 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{type:"button",onClick:Se,disabled:M==="basic",className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed text-sm px-4 py-2",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-3",children:B.map((a,l)=>{const h=a.id===M,p=B.findIndex(V=>V.id===M)>l,w=T(a);return e.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-200 ${$(h,p,w)}`},a.id)})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:U,className:"btn-secondary text-sm px-4 py-2",children:"Cancel"}),M==="notes"?e.jsx("button",{type:"submit",disabled:q,className:"btn-primary relative min-w-[120px] disabled:opacity-75 disabled:cursor-not-allowed text-sm px-6 py-2",children:q?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"loading-accent mr-2"}),e.jsx("span",{children:"Saving..."})]}):e.jsx("span",{children:N?"Update Application":"Add Application"})}):e.jsx("button",{type:"button",onClick:ge,className:"btn-primary text-sm px-6 py-2",children:"Next"})]})]})})]})]})})}):null}function Fs(){const[je,ue]=d.useState(!1),[N,c]=d.useState(null),[F,x]=d.useState(""),[O,q]=d.useState(""),[Q,X]=d.useState(""),[G,M]=d.useState(""),[P,re]=d.useState({field:"date_applied",direction:"desc"}),[H,me]=d.useState(""),[T,le]=d.useState(""),[$,ne]=d.useState(""),[fe,ie]=d.useState(!1),[y,U]=d.useState(new Set),[k,xe]=d.useState("table"),[z,ge]=d.useState(new Date),[Se,a]=d.useState(!1),[l,h]=d.useState("csv"),[p,w]=d.useState("filtered"),[V,ct]=d.useState({company:!0,role:!0,status:!0,priority:!0,dateApplied:!0,email:!0,source:!0,notes:!0,jobUrl:!1,resumeFilename:!1}),[De,Ue]=d.useState(!1),[Ie,W]=d.useState(""),[ye,Oe]=d.useState("applications"),[R,Z]=d.useState(1),[ee,dt]=d.useState(10),[_,ut]=d.useState({company:!0,role:!0,resume:!0,appliedWith:!0,status:!0,priority:!0,notes:!0,referralContact:!1,action:!0}),[He,qe]=d.useState(!1),ve=nt(),{data:L=[],isLoading:mt}=Yt({queryKey:["applications"],queryFn:()=>K.get("/applications/").then(t=>t.data),staleTime:2*60*1e3}),xt=ce({mutationFn:t=>K.delete(`/applications/${t}/`),onSuccess:()=>{ve.invalidateQueries({queryKey:["applications"]})}}),pt=ce({mutationFn:async({ids:t,status:s})=>{const r=t.map(n=>K.put(`/applications/${n}`,{status:s}));return Promise.all(r)},onSuccess:(t,s)=>{ve.invalidateQueries({queryKey:["applications"]}),U(new Set),W(`Successfully updated ${s.ids.length} application(s) to "${s.status}" status`),setTimeout(()=>W(""),3e3)}}),ht=ce({mutationFn:async({ids:t,priority:s})=>{const r=t.map(n=>K.put(`/applications/${n}`,{priority:s}));return Promise.all(r)},onSuccess:(t,s)=>{ve.invalidateQueries({queryKey:["applications"]}),U(new Set),W(`Successfully updated ${s.ids.length} application(s) to "${s.priority}" priority`),setTimeout(()=>W(""),3e3)}}),bt=ce({mutationFn:async t=>{const s=t.map(r=>K.delete(`/applications/${r}/`));return Promise.all(s)},onSuccess:(t,s)=>{ve.invalidateQueries({queryKey:["applications"]}),U(new Set),W(`Successfully deleted ${s.length} application(s)`),setTimeout(()=>W(""),3e3)}}),I=d.useMemo(()=>{const t=L.length;if(t===0)return{total:0,successRate:0,activeApplications:0,thisMonth:0,highPriority:0,needsFollowup:0,recentActivity:0};const s=L.filter(A=>A.status==="interview"||A.status==="offer").length,r=Math.round(s/t*100),n=L.filter(A=>A.status==="applied"||A.status==="interview"||A.status==="pending").length,i=new Date,b=new Date(i.getFullYear(),i.getMonth(),1),o=L.filter(A=>new Date(A.date_applied)>=b).length,m=L.filter(A=>A.priority===v.HIGH).length,f=new Date;f.setDate(f.getDate()-14);const j=L.filter(A=>A.status==="applied"&&new Date(A.date_applied)<f).length,D=new Date;D.setDate(D.getDate()-7);const oe=L.filter(A=>new Date(A.date_applied)>=D).length;return{total:t,successRate:r,activeApplications:n,thisMonth:o,highPriority:m,needsFollowup:j,recentActivity:oe}},[L]),jt=()=>{if(!H&&!T&&!$)return null;const t=new Date;let s=null,r=null;if(H)switch(H){case"today":s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59);break;case"week":s=new Date(t.getTime()-7*24*60*60*1e3),r=t;break;case"month":s=new Date(t.getFullYear(),t.getMonth(),1),r=t;break;case"quarter":const n=Math.floor(t.getMonth()/3)*3;s=new Date(t.getFullYear(),n,1),r=t;break;case"year":s=new Date(t.getFullYear(),0,1),r=t;break;case"last-30":s=new Date(t.getTime()-30*24*60*60*1e3),r=t;break;case"last-90":s=new Date(t.getTime()-90*24*60*60*1e3),r=t;break}return(T||$)&&(T&&(s=new Date(T)),$&&(r=new Date($),r.setHours(23,59,59))),{startDate:s,endDate:r}},S=d.useMemo(()=>L.filter(s=>{const r=s.company_name.toLowerCase().includes(F.toLowerCase())||s.job_title.toLowerCase().includes(F.toLowerCase())||s.job_id.toLowerCase().includes(F.toLowerCase())||s.email_used.toLowerCase().includes(F.toLowerCase())||s.notes&&s.notes.toLowerCase().includes(F.toLowerCase()),n=!O||s.status===O,i=!Q||s.priority===Q,b=!G||s.source===G,o=jt();let m=!0;if(o){const f=new Date(s.date_applied),{startDate:j,endDate:D}=o;j&&f<j&&(m=!1),D&&f>D&&(m=!1)}return r&&n&&i&&b&&m}).sort((s,r)=>{let n,i;switch(P.field){case"company_name":n=s.company_name.toLowerCase(),i=r.company_name.toLowerCase();break;case"job_title":n=s.job_title.toLowerCase(),i=r.job_title.toLowerCase();break;case"date_applied":n=new Date(s.date_applied).getTime(),i=new Date(r.date_applied).getTime();break;case"status":const b={offer:6,interview:5,applied:4,pending:3,rejected:2,withdrawn:1};n=b[s.status]||0,i=b[r.status]||0;break;case"priority":const o={[v.HIGH]:3,[v.MEDIUM]:2,[v.LOW]:1};n=o[s.priority]||0,i=o[r.priority]||0;break;case"source":n=s.source.toLowerCase(),i=r.source.toLowerCase();break;case"email_used":n=s.email_used.toLowerCase(),i=r.email_used.toLowerCase();break;case"relevance":const m=D=>{switch(D){case v.HIGH:return 3;case v.MEDIUM:return 2;case v.LOW:return 1;default:return 0}},f=D=>{switch(D){case"offer":return 10;case"interview":return 8;case"applied":return 6;case"pending":return 4;case"rejected":return 2;case"withdrawn":return 1;default:return 0}},j=D=>{const oe=Math.floor((Date.now()-new Date(D).getTime())/864e5);return Math.max(0,30-oe)};n=m(s.priority)*2+f(s.status)+j(s.date_applied),i=m(r.priority)*2+f(r.status)+j(r.date_applied);break;default:return 0}return n<i?P.direction==="asc"?-1:1:n>i?P.direction==="asc"?1:-1:0}),[L,F,O,Q,G,P,H,T,$]),ft=d.useMemo(()=>{const t=(R-1)*ee,s=t+ee;return S.slice(t,s)},[S,R,ee]),Y=Math.ceil(S.length/ee),te=()=>{Z(1)},Ne=t=>{re(s=>({field:t,direction:s.field===t&&s.direction==="asc"?"desc":"asc"}))},we=t=>{switch(x(""),q(""),X(""),M(""),te(),t){case"active":q("applied");break;case"high-priority":X(v.HIGH);break;case"needs-followup":q("applied");break;case"successful":q("interview");break}Oe("applications")},gt=t=>{me(t),t!=="custom"?(le(""),ne(""),ie(!1)):ie(!0),te()},yt=()=>{x(""),q(""),X(""),M(""),me(""),le(""),ne(""),ie(!1),te()},vt=t=>{ut(s=>({...s,[t]:!s[t]}))},Ae=d.useRef(null);d.useEffect(()=>{const t=s=>{Ae.current&&!Ae.current.contains(s.target)&&qe(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]);const Nt=t=>{x(t),te()},wt=t=>{q(t),te()},_t=t=>{X(t),te()},Ct=t=>{M(t),te()},ze=()=>{let t=0;return F&&t++,O&&t++,Q&&t++,G&&t++,(H||T||$)&&t++,t},Ve=()=>{if(!H&&!T&&!$)return"";if(H)switch(H){case"today":return"Today";case"week":return"Last 7 days";case"month":return"This month";case"quarter":return"This quarter";case"year":return"This year";case"last-30":return"Last 30 days";case"last-90":return"Last 90 days";default:return""}return T&&$?`${new Date(T).toLocaleDateString()} - ${new Date($).toLocaleDateString()}`:T?`From ${new Date(T).toLocaleDateString()}`:$?`Until ${new Date($).toLocaleDateString()}`:""},kt=()=>{if(y.size===S.length)U(new Set);else{const t=new Set(S.map(s=>s.id));U(t)}},St=t=>{const s=new Set(y);s.has(t)?s.delete(t):s.add(t),U(s)},Dt=t=>{if(y.size===0)return;const s=`Are you sure you want to update ${y.size} application(s) to "${t}" status?`;window.confirm(s)&&pt.mutate({ids:Array.from(y),status:t})},At=t=>{if(y.size===0)return;const s=`Are you sure you want to update ${y.size} application(s) to "${t}" priority?`;window.confirm(s)&&ht.mutate({ids:Array.from(y),priority:t})},Mt=()=>{if(y.size===0)return;const t=`Are you sure you want to delete ${y.size} application(s)? This action cannot be undone.`;window.confirm(t)&&bt.mutate(Array.from(y))},Pt=()=>{const s=S.filter(o=>y.has(o.id)).map(o=>({company:o.company_name,role:o.job_title,status:o.status,priority:o.priority,dateApplied:o.date_applied,email:o.email_used,source:o.source,notes:o.notes||""})),r=[["Company","Role","Status","Priority","Date Applied","Email","Source","Notes"],...s.map(o=>[o.company,o.role,o.status,o.priority,o.dateApplied,o.email,o.source,o.notes])].map(o=>o.join(",")).join(`
`),n=new Blob([r],{type:"text/csv"}),i=URL.createObjectURL(n),b=document.createElement("a");b.href=i,b.download=`applications-${new Date().toISOString().split("T")[0]}.csv`,b.click(),URL.revokeObjectURL(i)},Lt=async()=>{let t=[];switch(p){case"all":t=L;break;case"filtered":t=S;break;case"selected":t=S.filter(r=>y.has(r.id));break}if(t.length===0){alert("No data to export. Please select applications or adjust your filters.");return}const s=Object.entries(V).filter(([r,n])=>n).map(([r,n])=>r);if(s.length===0){alert("Please select at least one column to export.");return}Ue(!0);try{await new Promise(r=>setTimeout(r,500)),l==="csv"?Ft(t,s):Tt(t,s),W(`Successfully exported ${t.length} application(s) as ${l.toUpperCase()}`),setTimeout(()=>W(""),3e3),a(!1)}catch{alert("Export failed. Please try again.")}finally{Ue(!1)}},Ft=(t,s)=>{const r={company:"Company",role:"Role",status:"Status",priority:"Priority",dateApplied:"Date Applied",email:"Email Used",source:"Source",notes:"Notes",jobUrl:"Job URL",resumeFilename:"Resume File"},n=s.map(j=>r[j]),i=t.map(j=>s.map(D=>{switch(D){case"company":return j.company_name;case"role":return j.job_title;case"status":return j.status;case"priority":return j.priority;case"dateApplied":return j.date_applied;case"email":return j.email_used;case"source":return j.source;case"notes":return j.notes||"";case"jobUrl":return j.job_url||"";case"resumeFilename":return j.resume_filename||"";default:return""}}).map(D=>`"${String(D).replace(/"/g,'""')}"`)),b=[n.join(","),...i.map(j=>j.join(","))].join(`
`),o=new Blob([b],{type:"text/csv;charset=utf-8;"}),m=URL.createObjectURL(o),f=document.createElement("a");f.href=m,f.download=`applications-${p}-${new Date().toISOString().split("T")[0]}.csv`,f.click(),URL.revokeObjectURL(m)},Tt=(t,s)=>{const r=t.map(m=>{const f={};return s.forEach(j=>{switch(j){case"company":f.company=m.company_name;break;case"role":f.role=m.job_title;break;case"status":f.status=m.status;break;case"priority":f.priority=m.priority;break;case"dateApplied":f.dateApplied=m.date_applied;break;case"email":f.email=m.email_used;break;case"source":f.source=m.source;break;case"notes":f.notes=m.notes;break;case"jobUrl":f.jobUrl=m.job_url;break;case"resumeFilename":f.resumeFilename=m.resume_filename;break}}),f}),n=JSON.stringify({exportDate:new Date().toISOString(),exportScope:p,totalRecords:r.length,data:r},null,2),i=new Blob([n],{type:"application/json"}),b=URL.createObjectURL(i),o=document.createElement("a");o.href=b,o.download=`applications-${p}-${new Date().toISOString().split("T")[0]}.json`,o.click(),URL.revokeObjectURL(b)},Rt=()=>{if(!Se)return null;const t={all:L.length,filtered:S.length,selected:y.size};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(g.div,{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:"Export Applications"}),e.jsx("button",{onClick:()=>a(!1),className:"p-1 text-neutral-400 hover:text-neutral-600 rounded transition-colors",children:e.jsx(he,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"What to export"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"all",checked:p==="all",onChange:s=>w(s.target.value),className:"mr-2"}),e.jsxs("span",{className:"text-sm",children:["All applications (",t.all,")"]})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"filtered",checked:p==="filtered",onChange:s=>w(s.target.value),className:"mr-2"}),e.jsxs("span",{className:"text-sm",children:["Filtered results (",t.filtered,")"]})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"selected",checked:p==="selected",onChange:s=>w(s.target.value),className:"mr-2",disabled:t.selected===0}),e.jsxs("span",{className:`text-sm ${t.selected===0?"text-neutral-400":""}`,children:["Selected applications (",t.selected,")"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Format"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"csv",checked:l==="csv",onChange:s=>h(s.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"CSV (Excel compatible)"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"json",checked:l==="json",onChange:s=>h(s.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"JSON"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Columns to include"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto",children:Object.entries(V).map(([s,r])=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:n=>ct(i=>({...i,[s]:n.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm capitalize",children:s.replace(/([A-Z])/g," $1").trim()})]},s))})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6 pt-6 border-t border-neutral-200",children:[e.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 text-sm font-medium text-neutral-600 hover:text-neutral-800 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Lt,disabled:De,className:`btn-primary ${De?"opacity-50 cursor-not-allowed":""}`,children:De?e.jsxs(e.Fragment,{children:[e.jsx(os,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Export"]})})]})]})})},$t=t=>{const s=["applied","interview","offer"];if(["rejected","withdrawn"].includes(t))return{current:t,progress:0,isComplete:!1,isRejected:!0};const n=s.indexOf(t),i=n===-1?0:(n+1)/s.length*100;return{current:t,progress:i,isComplete:t==="offer",isRejected:!1}},Et=()=>{const[t,s]=d.useState(null),[r,n]=d.useState(null),i=new Date(z.getFullYear(),z.getMonth(),1),b=new Date(z.getFullYear(),z.getMonth()+1,0),o=new Date(i);o.setDate(o.getDate()-i.getDay());const m=new Date(b);m.setDate(m.getDate()+(6-b.getDay()));const f=[],j=new Date(o);for(;j<=m;)f.push(new Date(j)),j.setDate(j.getDate()+1);const D=d.useMemo(()=>{const u={};return S.forEach(C=>{const E=new Date(C.date_applied).toDateString();u[E]||(u[E]=[]),u[E].push(C)}),u},[S]),oe=u=>{const C=new Date(z);C.setMonth(C.getMonth()+(u==="next"?1:-1)),ge(C)},A=()=>{ge(new Date)},Ht=u=>{const C=new Date;return u.toDateString()===C.toDateString()},qt=u=>u.getMonth()===z.getMonth(),Fe=u=>D[u.toDateString()]||[],zt=(u,C)=>{const E=C.currentTarget.getBoundingClientRect();n({app:u,position:{x:E.left+E.width/2,y:E.top-10}})},Vt=()=>{n(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-neutral-900",children:z.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:A,className:"px-3 py-1 text-sm bg-neutral-100 text-neutral-700 rounded-md hover:bg-neutral-200 transition-colors",children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>oe("prev"),className:"p-2 rounded-md hover:bg-neutral-100 transition-colors",children:e.jsx(Qt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>oe("next"),className:"p-2 rounded-md hover:bg-neutral-100 transition-colors",children:e.jsx(Gt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"grid grid-cols-7 bg-neutral-50 border-b border-neutral-200",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(u=>e.jsx("div",{className:"p-2 sm:p-4 text-center text-xs sm:text-sm font-medium text-neutral-700",children:u},u))}),e.jsx("div",{className:"grid grid-cols-7",children:f.map((u,C)=>{const E=Fe(u),Qe=qt(u),Ge=Ht(u);return e.jsxs(g.div,{className:`relative border-r border-b border-neutral-200 min-h-20 sm:min-h-32 p-1 sm:p-2 cursor-pointer hover:bg-neutral-50 transition-colors overflow-hidden ${Qe?"":"bg-neutral-50/50 text-neutral-400"} ${Ge?"bg-blue-50":""}`,onClick:()=>s((t==null?void 0:t.toDateString())===u.toDateString()?null:u),whileHover:{scale:1.02},children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 sm:mb-2",children:[e.jsx("span",{className:`text-xs sm:text-sm font-medium ${Ge?"text-blue-600":Qe?"text-neutral-900":"text-neutral-400"}`,children:u.getDate()}),E.length>0&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-1 sm:px-1.5 py-0.5 rounded-full flex-shrink-0",children:E.length})]}),e.jsxs("div",{className:"space-y-1 overflow-hidden",children:[E.slice(0,3).map((_e,ps)=>e.jsx("div",{className:`text-xs px-2 py-1 rounded cursor-pointer hover:scale-105 transition-transform ${Me(_e.status)} border border-opacity-20 overflow-hidden`,onMouseEnter:Wt=>zt(_e,Wt),onMouseLeave:Vt,children:e.jsx("div",{className:"font-medium truncate leading-tight",children:_e.company_name})},_e.id)),E.length>3&&e.jsxs("div",{className:"text-xs text-neutral-500 text-center py-1",children:["+",E.length-3," more"]})]})]},C)})})]}),e.jsx(J,{children:t&&e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white border border-neutral-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("button",{onClick:()=>s(null),className:"text-neutral-400 hover:text-neutral-600 transition-colors",children:e.jsx(he,{className:"h-5 w-5"})})]}),Fe(t).length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:Fe(t).map(u=>{const C=$t(u.status);return e.jsxs("div",{className:"bg-neutral-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-blue-100",children:e.jsx(be,{className:"h-3 w-3 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm text-neutral-900",children:u.company_name}),e.jsx("div",{className:"text-xs text-neutral-600",children:u.job_title})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>Be(u),className:"p-1 text-neutral-400 hover:text-blue-600 rounded transition-colors",children:e.jsx(rt,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>Je(u.id),className:"p-1 text-neutral-400 hover:text-red-600 rounded transition-colors",children:e.jsx(tt,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-neutral-500",children:"Status"}),e.jsx("span",{className:`text-xs font-medium ${C.isRejected?"text-red-600":C.isComplete?"text-green-600":"text-blue-600"}`,children:u.status.charAt(0).toUpperCase()+u.status.slice(1)})]}),e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-1.5",children:e.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${C.isRejected?"bg-red-500":C.isComplete?"bg-green-500":"bg-blue-500"}`,style:{width:`${C.isRejected?100:C.progress}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ${Pe(u.priority)}`,children:[Le(u.priority),e.jsx("span",{children:u.priority})]}),e.jsx("div",{className:"text-xs text-neutral-500",children:u.source})]})]},u.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ce,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),e.jsx("p",{className:"text-neutral-600",children:"No applications on this date"})]})]})}),e.jsx(J,{children:r&&e.jsx(g.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"fixed z-50 bg-white border border-neutral-200 rounded-lg shadow-lg p-4 max-w-sm pointer-events-none",style:{left:r.position.x,top:r.position.y,transform:"translateX(-50%) translateY(-100%)"},children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-neutral-900",children:r.app.company_name}),e.jsx("p",{className:"text-sm text-neutral-600",children:r.app.job_title})]}),e.jsx("div",{className:"p-1.5 rounded-lg bg-blue-50",children:e.jsx(be,{className:"h-4 w-4 text-blue-600"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-neutral-500",children:"Status:"}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded ${Me(r.app.status)}`,children:r.app.status.charAt(0).toUpperCase()+r.app.status.slice(1)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-neutral-500",children:"Priority:"}),e.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ${Pe(r.app.priority)}`,children:[Le(r.app.priority),e.jsx("span",{children:r.app.priority})]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-neutral-500",children:"Applied:"}),e.jsx("span",{className:"text-neutral-900",children:new Date(r.app.date_applied).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-neutral-500",children:"Source:"}),e.jsx("span",{className:"text-neutral-900 capitalize",children:r.app.source.replace("_"," ")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-neutral-500",children:"Email:"}),e.jsx("span",{className:"text-neutral-900 truncate ml-2",children:r.app.email_used})]})]}),r.app.job_url&&e.jsx("div",{className:"pt-2 border-t border-neutral-100",children:e.jsxs("a",{href:r.app.job_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-blue-600 hover:text-blue-700 transition-colors",children:[e.jsx(Te,{className:"h-3 w-3"}),"View Job Posting"]})}),r.app.notes&&e.jsxs("div",{className:"pt-2 border-t border-neutral-100",children:[e.jsx("span",{className:"text-xs text-neutral-500",children:"Notes:"}),e.jsx("p",{className:"text-sm text-neutral-700 mt-1 line-clamp-3",children:r.app.notes})]})]})})})]})},Ut=()=>{if(Y<=1)return null;const t=()=>{const s=[],n=Math.floor(3.5);let i=Math.max(1,R-n),b=Math.min(Y,R+n);R<=n&&(b=Math.min(Y,7)),R>Y-n&&(i=Math.max(1,Y-7+1));for(let o=i;o<=b;o++)s.push(o);return s};return e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-6 border-t border-neutral-200",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-neutral-600",children:"Show:"}),e.jsxs("select",{value:ee,onChange:s=>{dt(Number(s.target.value)),Z(1)},className:"px-3 py-1 border border-neutral-300 rounded-md text-sm",children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{className:"text-sm text-neutral-600",children:"per page"})]}),e.jsxs("div",{className:"text-sm text-neutral-600",children:["Showing ",Math.min((R-1)*ee+1,S.length)," to"," ",Math.min(R*ee,S.length)," of"," ",S.length," results"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>Z(1),disabled:R===1,className:"px-3 py-1 text-sm border border-neutral-300 rounded-md hover:bg-neutral-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"First"}),e.jsx("button",{onClick:()=>Z(R-1),disabled:R===1,className:"px-3 py-1 text-sm border border-neutral-300 rounded-md hover:bg-neutral-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),t().map(s=>e.jsx("button",{onClick:()=>Z(s),className:`px-3 py-1 text-sm border rounded-md ${R===s?"bg-blue-600 text-white border-blue-600":"border-neutral-300 hover:bg-neutral-50"}`,children:s},s)),e.jsx("button",{onClick:()=>Z(R+1),disabled:R===Y,className:"px-3 py-1 text-sm border border-neutral-300 rounded-md hover:bg-neutral-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"}),e.jsx("button",{onClick:()=>Z(Y),disabled:R===Y,className:"px-3 py-1 text-sm border border-neutral-300 rounded-md hover:bg-neutral-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Last"})]})]})},We=({tab:t,label:s,count:r})=>e.jsx("button",{onClick:()=>Oe(t),className:`px-4 py-2.5 text-sm font-medium transition-all duration-200 border-b-2 ${ye===t?"text-neutral-900 border-neutral-900 bg-neutral-50":"text-neutral-600 border-transparent hover:text-neutral-900 hover:border-neutral-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s}),r!==void 0&&e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${ye===t?"bg-neutral-200 text-neutral-700":"bg-neutral-100 text-neutral-500"}`,children:r})]})}),pe=({field:t,children:s,className:r="p-3"})=>{const n=P.field===t,i=P.direction;return e.jsx("th",{className:`text-left font-semibold text-neutral-900 cursor-pointer hover:bg-neutral-100 transition-colors select-none ${r}`,onClick:()=>Ne(t),children:e.jsxs("div",{className:"flex items-center gap-2 group",children:[s,e.jsx("div",{className:"flex flex-col",children:n?i==="asc"?e.jsx(ss,{className:"h-4 w-4 text-blue-600"}):e.jsx(as,{className:"h-4 w-4 text-blue-600"}):e.jsx(ls,{className:"h-4 w-4 text-neutral-400 group-hover:text-neutral-600 transition-colors"})})]})})},se=({title:t,value:s,icon:r,color:n="blue",trend:i,onClick:b,clickable:o=!1})=>{const m={blue:"bg-blue-50 border-blue-200 text-blue-600",green:"bg-green-50 border-green-200 text-green-600",orange:"bg-orange-50 border-orange-200 text-orange-600",red:"bg-red-50 border-red-200 text-red-600",purple:"bg-purple-50 border-purple-200 text-purple-600",gray:"bg-gray-50 border-gray-200 text-gray-600"};return e.jsx(g.div,{className:`card p-6 ${o?"cursor-pointer hover:shadow-md":""} transition-all duration-200`,onClick:b,whileHover:o?{scale:1.02}:{},whileTap:o?{scale:.98}:{},children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg border ${m[n]}`,children:e.jsx(r,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-neutral-600",children:t}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:s})]})]}),i&&e.jsx("p",{className:"text-sm text-neutral-500 mt-2",children:i})]})})})},It=()=>{c(null),ue(!0)},Be=t=>{c(t),ue(!0)},Je=t=>{window.confirm("Are you sure you want to delete this application?")&&xt.mutate(t)},Me=t=>{switch(t){case"applied":return"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200";case"interview":return"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200";case"offer":return"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200";case"rejected":return"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 border border-red-200";case"withdrawn":return"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200";default:return"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200"}},Pe=t=>{switch(t){case v.HIGH:return"text-red-700 bg-red-50 border-red-200";case v.MEDIUM:return"text-yellow-700 bg-yellow-50 border-yellow-200";case v.LOW:return"text-gray-700 bg-gray-50 border-gray-200";default:return"text-yellow-700 bg-yellow-50 border-yellow-200"}},Le=t=>{switch(t){case v.HIGH:return e.jsx(ds,{className:"h-3 w-3"});case v.MEDIUM:return e.jsx(Re,{className:"h-3 w-3"});case v.LOW:return e.jsx(cs,{className:"h-3 w-3"});default:return e.jsx(Re,{className:"h-3 w-3"})}},Ot={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},ae={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return mt?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-12 bg-neutral-200 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-6 bg-neutral-100 rounded-lg animate-pulse w-2/3"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((t,s)=>e.jsx("div",{className:"h-32 bg-neutral-100 rounded-lg animate-pulse"},s))}),e.jsxs("div",{className:"card p-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:Array.from({length:4}).map((t,s)=>e.jsx("div",{className:"h-12 bg-neutral-100 rounded-lg animate-pulse"},s))}),e.jsx("div",{className:"space-y-4",children:Array.from({length:6}).map((t,s)=>e.jsx("div",{className:"h-20 bg-neutral-50 rounded-lg animate-pulse"},s))})]})]}):e.jsxs(g.div,{className:"space-y-4",variants:Ot,initial:"hidden",animate:"visible",children:[e.jsx(g.div,{variants:ae,className:"relative",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Applications"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-neutral-100 rounded-full border border-neutral-200",children:[e.jsx(Ye,{className:"h-4 w-4 text-neutral-600"}),e.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"Job Applications"})]})]}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Track and manage your job applications with precision"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(g.button,{onClick:()=>a(!0),className:"px-4 py-2 bg-white border border-neutral-300 hover:bg-neutral-50 text-neutral-700 rounded-lg font-medium text-sm transition-colors flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(Xe,{className:"h-4 w-4"}),"Export"]}),e.jsxs(g.button,{className:"px-4 py-2 bg-neutral-900 hover:bg-neutral-800 text-white rounded-lg font-medium text-sm transition-colors flex items-center gap-2",onClick:It,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(Kt,{className:"h-4 w-4"}),"Add Application"]})]})]})}),e.jsxs(g.div,{variants:ae,className:"flex items-end gap-0 border-b border-neutral-200",children:[e.jsx(We,{tab:"applications",label:"Applications",count:S.length}),e.jsx(We,{tab:"stats",label:"Analytics & Stats"})]}),ye==="stats"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(g.div,{variants:ae,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(se,{title:"Total Applications",value:I.total,icon:be,color:"blue",trend:I.recentActivity>0?`${I.recentActivity} this week`:void 0}),e.jsx(se,{title:"Success Rate",value:`${I.successRate}%`,icon:Ze,color:I.successRate>20?"green":I.successRate>10?"orange":"red",trend:I.successRate>0?`${L.filter(t=>t.status==="interview"||t.status==="offer").length} interviews/offers`:void 0,onClick:()=>we("successful"),clickable:!0}),e.jsx(se,{title:"Active Applications",value:I.activeApplications,icon:et,color:"orange",trend:"In progress",onClick:()=>we("active"),clickable:!0}),e.jsx(se,{title:"This Month",value:I.thisMonth,icon:Ce,color:"purple",trend:"Applications submitted"})]}),e.jsxs(g.div,{variants:ae,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(se,{title:"High Priority",value:I.highPriority,icon:Zt,color:"red",trend:"Applications marked high priority",onClick:()=>we("high-priority"),clickable:!0}),e.jsx(se,{title:"Needs Follow-up",value:I.needsFollowup,icon:Jt,color:"gray",trend:"Applied >14 days ago",onClick:()=>we("needs-followup"),clickable:!0}),e.jsx(se,{title:"Recent Activity",value:I.recentActivity,icon:Ke,color:"green",trend:"Applications in last 7 days"})]}),e.jsxs(g.div,{variants:ae,className:"bg-white border border-neutral-200 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-neutral-100",children:e.jsx(Ze,{className:"h-4 w-4 text-neutral-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-neutral-900",children:"Source Effectiveness"}),e.jsx("p",{className:"text-xs text-neutral-600",children:"How well each application source performs"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(L.reduce((t,s)=>{const r=s.source;return t[r]||(t[r]={total:0,interviews:0,offers:0,rejected:0}),t[r].total+=1,s.status==="interview"&&(t[r].interviews+=1),s.status==="offer"&&(t[r].offers+=1),s.status==="rejected"&&(t[r].rejected+=1),t},{})).sort(([,t],[,s])=>s.total-t.total).map(([t,s])=>{const r=s.total>0?Math.round((s.interviews+s.offers)/s.total*100):0,n=s.total>0?Math.round(s.interviews/s.total*100):0,i=s.total>0?Math.round(s.offers/s.total*100):0,b=m=>m>=30?"text-green-700 bg-green-50 border-green-200":m>=15?"text-yellow-700 bg-yellow-50 border-yellow-200":m>=5?"text-orange-700 bg-orange-50 border-orange-200":"text-red-700 bg-red-50 border-red-200",o=m=>{switch(m){case"linkedin":return"";case"indeed":return"";case"company_website":return"";case"referral":return"";case"glassdoor":return"";default:return""}};return e.jsxs(g.div,{className:"p-4 border border-neutral-200 rounded-lg hover:shadow-sm transition-shadow",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:o(t)}),e.jsx("span",{className:"font-medium text-neutral-900 capitalize",children:t.replace("_"," ")})]}),e.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium border ${b(r)}`,children:[r,"% success"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600",children:"Total Applications"}),e.jsx("span",{className:"font-medium text-neutral-900",children:s.total})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600",children:"Interviews"}),e.jsxs("span",{className:"font-medium text-blue-600",children:[s.interviews," (",n,"%)"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600",children:"Offers"}),e.jsxs("span",{className:"font-medium text-green-600",children:[s.offers," (",i,"%)"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600",children:"Rejected"}),e.jsx("span",{className:"font-medium text-red-600",children:s.rejected})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${r>=30?"bg-green-500":r>=15?"bg-yellow-500":r>=5?"bg-orange-500":"bg-red-500"}`,style:{width:`${Math.min(r,100)}%`}})})})]},t)})}),L.length>0&&e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ke,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:" Recommendations"}),e.jsx("div",{className:"text-sm text-blue-700",children:(()=>{const t=Object.entries(L.reduce((n,i)=>{const b=i.source;return n[b]||(n[b]={total:0,success:0}),n[b].total+=1,(i.status==="interview"||i.status==="offer")&&(n[b].success+=1),n},{})).map(([n,i])=>({source:n,rate:i.total>0?i.success/i.total*100:0,total:i.total})).sort((n,i)=>i.rate-n.rate),s=t[0],r=t[t.length-1];return s&&r&&s.rate>r.rate?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"capitalize",children:s.source.replace("_"," ")})," is your most effective source with a ",s.rate.toFixed(1),"% success rate."]}),s.rate>20&&e.jsx("p",{children:"Consider focusing more applications through this channel for better results."}),r.rate<10&&r.total>3&&e.jsxs("p",{children:[e.jsx("strong",{className:"capitalize",children:r.source.replace("_"," ")})," has a lower success rate (",r.rate.toFixed(1),"%). Consider improving your approach or focusing on other sources."]})]}):e.jsx("p",{children:"Apply to more positions to see effectiveness patterns and recommendations."})})()})]})]})})]})]}),ye==="applications"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(g.div,{variants:ae,className:"bg-white border border-neutral-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-neutral-100",children:e.jsx(Xt,{className:"h-4 w-4 text-neutral-600"})}),e.jsx("h3",{className:"text-base font-semibold text-neutral-900",children:"Filters & Search"}),ze()>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium bg-neutral-200 text-neutral-700 rounded-full",children:[ze()," active"]}),e.jsx("button",{onClick:yt,className:"text-xs text-neutral-500 hover:text-red-600 transition-colors",children:"Clear all"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>xe("table"),className:`p-2 rounded-md transition-all ${k==="table"?"bg-neutral-200 text-neutral-900 border border-neutral-300":"bg-neutral-100 text-neutral-600 hover:bg-neutral-200"}`,title:"Table view",children:e.jsx(es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>xe("calendar"),className:`p-2 rounded-md transition-all ${k==="calendar"?"bg-neutral-200 text-neutral-900 border border-neutral-300":"bg-neutral-100 text-neutral-600 hover:bg-neutral-200"}`,title:"Calendar view",children:e.jsx(Ce,{className:"h-4 w-4"})}),k==="table"&&e.jsxs("div",{className:"relative",ref:Ae,children:[e.jsx("button",{onClick:()=>qe(!He),className:"p-2 rounded-md bg-neutral-100 text-neutral-600 hover:bg-neutral-200 transition-all",title:"Select columns",children:e.jsx(rs,{className:"h-4 w-4"})}),e.jsx(J,{children:He&&e.jsxs(g.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 top-full mt-2 w-48 bg-white border border-neutral-200 rounded-lg shadow-lg py-2 z-10",children:[e.jsx("div",{className:"px-3 py-2 text-xs font-medium text-neutral-500 border-b border-neutral-100",children:"Show/Hide Columns"}),[{key:"company",label:"Company"},{key:"role",label:"Role"},{key:"resume",label:"Resume"},{key:"appliedWith",label:"Applied With"},{key:"status",label:"Status"},{key:"priority",label:"Priority"},{key:"notes",label:"Notes"},{key:"referralContact",label:"Referral Contact"},{key:"action",label:"Actions"}].map(t=>e.jsxs("button",{onClick:()=>vt(t.key),className:"w-full flex items-center justify-between px-3 py-2 text-sm hover:bg-neutral-50 transition-colors",children:[e.jsx("span",{className:"text-neutral-700",children:t.label}),_[t.key]&&e.jsx(ts,{className:"h-4 w-4 text-green-600"})]},t.key))]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 mb-4",children:[e.jsxs("div",{className:"relative lg:col-span-4",children:[e.jsx(ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),e.jsx("input",{type:"text",placeholder:"Search companies, positions, notes...",value:F,onChange:t=>Nt(t.target.value),className:"w-full pl-10 pr-4 py-2.5 text-sm border border-neutral-300 rounded-lg focus:ring-2 focus:ring-neutral-900 focus:border-transparent"})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("select",{value:O,onChange:t=>wt(t.target.value),className:"w-full py-2.5 px-3 text-sm border border-neutral-300 rounded-lg focus:ring-2 focus:ring-neutral-900 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"applied",children:"Applied"}),e.jsx("option",{value:"interview",children:"Interview"}),e.jsx("option",{value:"offer",children:"Offer"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"withdrawn",children:"Withdrawn"})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("select",{value:Q,onChange:t=>_t(t.target.value),className:"w-full py-2.5 px-3 text-sm border border-neutral-300 rounded-lg focus:ring-2 focus:ring-neutral-900 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:v.HIGH,children:"High"}),e.jsx("option",{value:v.MEDIUM,children:"Medium"}),e.jsx("option",{value:v.LOW,children:"Low"})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("select",{value:G,onChange:t=>Ct(t.target.value),className:"w-full py-2.5 px-3 text-sm border border-neutral-300 rounded-lg focus:ring-2 focus:ring-neutral-900 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Sources"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"}),e.jsx("option",{value:"indeed",children:"Indeed"}),e.jsx("option",{value:"company_website",children:"Company Website"}),e.jsx("option",{value:"referral",children:"Referral"}),e.jsx("option",{value:"other",children:"Other"})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"flex items-center justify-center h-full px-4 py-2.5 rounded-lg bg-neutral-50 border border-neutral-200",children:[e.jsxs("span",{className:"text-sm font-medium text-neutral-700",children:[S.length," results"]}),e.jsx(Ye,{className:"h-4 w-4 text-neutral-500 ml-2"})]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),e.jsxs("select",{value:H,onChange:t=>gt(t.target.value),className:"pl-10 pr-8 py-2 text-sm border border-neutral-300 rounded-lg focus:ring-2 focus:ring-neutral-900 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"Last 7 days"}),e.jsx("option",{value:"month",children:"This month"}),e.jsx("option",{value:"quarter",children:"This quarter"}),e.jsx("option",{value:"year",children:"This year"}),e.jsx("option",{value:"last-30",children:"Last 30 days"}),e.jsx("option",{value:"last-90",children:"Last 90 days"}),e.jsx("option",{value:"custom",children:"Custom range"})]})]}),e.jsx(J,{children:fe&&e.jsxs(e.Fragment,{children:[e.jsx(g.input,{type:"date",value:T,onChange:t=>le(t.target.value),className:"py-2 px-3 text-sm border border-neutral-300 rounded-lg focus:ring-2 focus:ring-neutral-900 focus:border-transparent",placeholder:"From date",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20}}),e.jsx(g.input,{type:"date",value:$,onChange:t=>ne(t.target.value),className:"py-2 px-3 text-sm border border-neutral-300 rounded-lg focus:ring-2 focus:ring-neutral-900 focus:border-transparent",placeholder:"To date",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20}})]})}),Ve()&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-neutral-100 border border-neutral-200 rounded-lg",children:[e.jsx(lt,{className:"h-4 w-4 text-neutral-600"}),e.jsx("span",{className:"text-sm font-medium text-neutral-700",children:Ve()}),e.jsx("button",{onClick:()=>{me(""),le(""),ne(""),ie(!1)},className:"text-neutral-600 hover:text-neutral-800 transition-colors",children:e.jsx(he,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-neutral-600 mr-2",children:"Sort by:"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:()=>Ne("relevance"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${P.field==="relevance"?"bg-neutral-900 text-white":"bg-neutral-100 text-neutral-600 hover:bg-neutral-200"}`,children:[e.jsx(Ee,{className:"h-4 w-4 inline mr-1"}),"Relevance"]}),e.jsxs("button",{onClick:()=>Ne("date_applied"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${P.field==="date_applied"?"bg-neutral-900 text-white":"bg-neutral-100 text-neutral-600 hover:bg-neutral-200"}`,children:[e.jsx(Ce,{className:"h-4 w-4 inline mr-1"}),"Date"]}),e.jsxs("button",{onClick:()=>Ne("priority"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${P.field==="priority"?"bg-neutral-900 text-white":"bg-neutral-100 text-neutral-600 hover:bg-neutral-200"}`,children:[e.jsx(et,{className:"h-4 w-4 inline mr-1"}),"Priority"]})]})]})]})]}),e.jsxs(g.div,{variants:ae,className:"bg-white border border-neutral-200 rounded-lg p-4",children:[e.jsx(J,{children:y.size>0&&e.jsx(g.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-4 p-3 bg-neutral-100 border border-neutral-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-neutral-700",children:[y.size," application",y.size>1?"s":""," selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{onChange:t=>Dt(t.target.value),className:"px-2 py-1 text-sm border border-neutral-300 rounded-md bg-white",defaultValue:"",children:[e.jsx("option",{value:"",children:"Update Status"}),e.jsx("option",{value:"interview",children:"Interview"}),e.jsx("option",{value:"offer",children:"Offer"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsxs("select",{onChange:t=>At(t.target.value),className:"px-2 py-1 text-sm border border-neutral-300 rounded-md bg-white",defaultValue:"",children:[e.jsx("option",{value:"",children:"Update Priority"}),e.jsx("option",{value:v.HIGH,children:"High"}),e.jsx("option",{value:v.MEDIUM,children:"Medium"}),e.jsx("option",{value:v.LOW,children:"Low"})]}),e.jsx("button",{onClick:Pt,className:"px-2 py-1 text-sm bg-neutral-900 text-white rounded-md hover:bg-neutral-800 transition-colors",children:"Export"}),e.jsx("button",{onClick:Mt,className:"px-2 py-1 text-sm bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Delete"})]})]})})}),k==="table"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"inline-block min-w-full align-middle",children:e.jsxs("table",{className:"min-w-full divide-y divide-neutral-200",children:[e.jsx("thead",{className:"bg-neutral-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-semibold text-neutral-900",children:e.jsx("button",{onClick:kt,className:"p-1 rounded hover:bg-neutral-200 transition-colors",title:y.size===S.length?"Deselect all":"Select all",children:y.size===S.length?e.jsx(st,{className:"h-4 w-4 text-blue-600"}):y.size>0?e.jsx(Re,{className:"h-4 w-4 text-blue-600"}):e.jsx(at,{className:"h-4 w-4 text-neutral-400"})})}),_.company&&e.jsx(pe,{field:"company_name",children:"Company"}),_.role&&e.jsx(pe,{field:"job_title",children:"Role"}),_.resume&&e.jsx("th",{className:"text-left p-3 font-semibold text-neutral-900",children:"Resume"}),_.appliedWith&&e.jsx(pe,{field:"email_used",children:"Applied With"}),_.status&&e.jsx(pe,{field:"status",children:"Status"}),_.priority&&e.jsx(pe,{field:"priority",children:"Priority"}),_.notes&&e.jsx("th",{className:"text-left p-3 font-semibold text-neutral-900",children:"Notes"}),_.referralContact&&e.jsx("th",{className:"text-left p-3 font-semibold text-neutral-900",children:"Referral Contact"}),_.action&&e.jsx("th",{className:"text-left p-3 font-semibold text-neutral-900",children:"Actions"})]})}),e.jsx("tbody",{children:e.jsx(J,{children:ft.map((t,s)=>e.jsxs(g.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:s*.05},className:`border-b border-neutral-100 hover:bg-neutral-50 transition-colors ${y.has(t.id)?"bg-blue-50":""}`,children:[e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>St(t.id),className:"p-1 rounded hover:bg-neutral-200 transition-colors",title:y.has(t.id)?"Deselect":"Select",children:y.has(t.id)?e.jsx(st,{className:"h-4 w-4 text-blue-600"}):e.jsx(at,{className:"h-4 w-4 text-neutral-400 hover:text-blue-600"})})}),_.company&&e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:e.jsx(be,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-neutral-900",children:t.company_name}),e.jsxs("div",{className:"text-sm text-neutral-500",children:["Applied ",new Date(t.date_applied).toLocaleDateString()]})]})]})}),_.role&&e.jsx("td",{className:"p-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-neutral-900 mb-1",children:t.job_title}),t.job_url&&e.jsxs("a",{href:t.job_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 transition-colors",children:[e.jsx(Te,{className:"h-3 w-3"}),"View Posting"]})]})}),_.resume&&e.jsx("td",{className:"p-3",children:t.resume_filename?e.jsxs("a",{href:`/api/applications/${t.id}/resume`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 transition-colors group",children:[e.jsx(ke,{className:"h-4 w-4 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"text-sm truncate max-w-32",title:t.resume_filename,children:t.resume_filename}),e.jsx(Te,{className:"h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]}):e.jsx("span",{className:"text-sm text-neutral-400",children:"-"})}),_.appliedWith&&e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4 text-neutral-500"}),e.jsx("span",{className:"text-sm text-neutral-700",children:t.email_used})]})}),_.status&&e.jsx("td",{className:"p-3",children:e.jsx("span",{className:Me(t.status),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})}),_.priority&&e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium border ${Pe(t.priority)}`,children:[Le(t.priority),e.jsx("span",{children:t.priority.charAt(0).toUpperCase()+t.priority.slice(1)})]})}),_.notes&&e.jsx("td",{className:"p-3",children:t.notes?e.jsx("div",{className:"text-sm text-neutral-700 max-w-48 truncate",title:t.notes,children:t.notes}):e.jsx("span",{className:"text-sm text-neutral-400",children:"-"})}),_.referralContact&&e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-400",children:[e.jsx(it,{className:"h-4 w-4"}),e.jsx("span",{children:"-"})]})}),_.action&&e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g.button,{onClick:()=>Be(t),className:"p-2 text-neutral-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Edit application",children:e.jsx(rt,{className:"h-4 w-4"})}),e.jsx(g.button,{onClick:()=>Je(t.id),className:"p-2 text-neutral-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Delete application",children:e.jsx(tt,{className:"h-4 w-4"})})]})})]},t.id))})})]})})}),k==="calendar"&&e.jsx(Et,{}),k!=="calendar"&&e.jsx(Ut,{})]})]}),e.jsx(xs,{isOpen:je,onClose:()=>{ue(!1),c(null)},editingApplication:N}),e.jsx(Rt,{}),e.jsx(J,{children:Ie&&e.jsxs(g.div,{initial:{opacity:0,y:-100},animate:{opacity:1,y:0},exit:{opacity:0,y:-100},className:"fixed top-4 right-4 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2",children:[e.jsx(ot,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:Ie}),e.jsx("button",{onClick:()=>W(""),className:"ml-2 text-green-100 hover:text-white transition-colors",children:e.jsx(he,{className:"h-4 w-4"})})]})})]})}export{Fs as default};
