import{r as o,j as e,m as l,A as xe,F as M,a as Z,X as R,C as Fe,d as Le}from"./index-0B-QrMym.js";import{u as $e}from"./useQuery-gFyUPQ7C.js";import{T as He}from"./TemplateFileManager-Dg7n9nyj.js";import{a as he}from"./api-BgONvxhD.js";import{C as Me,D as E}from"./download-BfIeGHGd.js";import{B as ee}from"./building-C-svXhnr.js";import{T as Ee}from"./trending-up-CiTOepoW.js";import{G as Ue}from"./grid-3x3-BrqtIY49.js";import{T as Je,A as pe,a as be,C as te,M as Oe}from"./table-NpWfy8zk.js";import{F as Pe,C as ze}from"./trash-2-CzVBZmWj.js";import{S as je}from"./search-DuMWX5kD.js";import{R as qe}from"./rotate-cw-BU4PmOrm.js";import"./useMutation-DdaFRHUm.js";import"./plus-CaDpXQUP.js";const lt=()=>{const[v,W]=o.useState(""),[_,U]=o.useState(""),[S,J]=o.useState(""),[g,G]=o.useState({field:"date_applied",direction:"desc"}),[T,O]=o.useState(""),[w,P]=o.useState(""),[N,z]=o.useState(""),[ge,Q]=o.useState(!1),[x,F]=o.useState(new Set),[q,se]=o.useState("cards"),[fe,L]=o.useState(!1),[ae,ve]=o.useState("csv"),[le,we]=o.useState("filtered"),[m,Ne]=o.useState({filename:!0,company:!0,jobTitle:!0,dateApplied:!0,status:!1,notes:!1,createdAt:!1}),[ne,re]=o.useState(!1),[ie,B]=o.useState(""),[$,A]=o.useState("resumes"),[h,H]=o.useState(1),[D,ye]=o.useState(12),[f]=o.useState({filename:!0,company:!0,jobTitle:!0,dateApplied:!0,status:!1,notes:!0,action:!0}),{data:u=[],isLoading:Ce,error:Te}=$e({queryKey:["resumes"],queryFn:()=>he.get("/resumes/").then(t=>t.data),staleTime:2*60*1e3}),j=o.useMemo(()=>{const t=u.length;if(t===0)return{total:0,byCompany:{},topJobTitles:[],recentUploads:0,uniqueCompanies:0};const s=u.reduce((r,p)=>(r[p.company_name]=(r[p.company_name]||0)+1,r),{}),a=u.reduce((r,p)=>(r[p.job_title]=(r[p.job_title]||0)+1,r),{}),c=Object.entries(a).sort(([,r],[,p])=>p-r).slice(0,5).map(([r,p])=>({title:r,count:p})),n=new Date;n.setDate(n.getDate()-7);const d=u.filter(r=>new Date(r.date_applied)>=n).length,i=new Set(u.map(r=>r.company_name)).size;return{total:t,byCompany:s,topJobTitles:c,recentUploads:d,uniqueCompanies:i}},[u]),ke=o.useMemo(()=>u?[...new Set(u.map(s=>s.company_name))].sort():[],[u]),_e=o.useMemo(()=>u?[...new Set(u.map(s=>s.job_title))].sort():[],[u]),Se=()=>{if(!T&&!w&&!N)return null;const t=new Date;let s=null,a=null;if(T)switch(T){case"today":s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59);break;case"week":s=new Date(t.getTime()-7*24*60*60*1e3),a=t;break;case"month":s=new Date(t.getFullYear(),t.getMonth(),1),a=t;break;case"quarter":const c=Math.floor(t.getMonth()/3)*3;s=new Date(t.getFullYear(),c,1),a=t;break;case"year":s=new Date(t.getFullYear(),0,1),a=t;break;case"last-30":s=new Date(t.getTime()-30*24*60*60*1e3),a=t;break;case"last-90":s=new Date(t.getTime()-90*24*60*60*1e3),a=t;break}return(w||N)&&(w&&(s=new Date(w)),N&&(a=new Date(N),a.setHours(23,59,59))),{startDate:s,endDate:a}},b=o.useMemo(()=>u.filter(s=>{const a=s.company_name.toLowerCase().includes(v.toLowerCase())||s.job_title.toLowerCase().includes(v.toLowerCase())||s.resume_filename.toLowerCase().includes(v.toLowerCase())||s.notes&&s.notes.toLowerCase().includes(v.toLowerCase()),c=!_||s.company_name===_,n=!S||s.job_title===S,d=Se();let i=!0;if(d){const r=new Date(s.date_applied),{startDate:p,endDate:ue}=d;p&&r<p&&(i=!1),ue&&r>ue&&(i=!1)}return a&&c&&n&&i}).sort((s,a)=>{let c,n;switch(g.field){case"resume_filename":c=s.resume_filename.toLowerCase(),n=a.resume_filename.toLowerCase();break;case"company_name":c=s.company_name.toLowerCase(),n=a.company_name.toLowerCase();break;case"job_title":c=s.job_title.toLowerCase(),n=a.job_title.toLowerCase();break;case"date_applied":c=new Date(s.date_applied).getTime(),n=new Date(a.date_applied).getTime();break;case"created_at":c=new Date(s.created_at||s.date_applied).getTime(),n=new Date(a.created_at||a.date_applied).getTime();break;case"relevance":const d=r=>{const p=Math.floor((Date.now()-new Date(r).getTime())/864e5);return Math.max(0,30-p)},i=r=>j.byCompany[r]||1;c=d(s.date_applied)+i(s.company_name),n=d(a.date_applied)+i(a.company_name);break;default:return 0}return c<n?g.direction==="asc"?-1:1:c>n?g.direction==="asc"?1:-1:0}),[u,v,_,S,g,T,w,N,j]),y=o.useMemo(()=>{const t=(h-1)*D,s=t+D;return b.slice(t,s)},[b,h,D]),C=Math.ceil(b.length/D),ce=t=>{G(s=>({field:t,direction:s.field===t&&s.direction==="asc"?"desc":"asc"}))},De=()=>{if(x.size===y.length)F(new Set);else{const t=new Set(y.map(s=>s.id));F(t)}},oe=t=>{const s=new Set(x);s.has(t)?s.delete(t):s.add(t),F(s)},I=()=>{W(""),U(""),J(""),O(""),P(""),z(""),G({field:"date_applied",direction:"desc"}),H(1)},de=()=>{O(""),P(""),z(""),Q(!1)},K=async(t,s)=>{try{const a=await he.get(`/applications/${t}/resume`,{responseType:"blob"}),c=window.URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=c,n.setAttribute("download",s),document.body.appendChild(n),n.click(),n.remove(),window.URL.revokeObjectURL(c)}catch(a){console.error("Error downloading resume:",a),alert("Failed to download resume file.")}},Ae=async()=>{const t=b.filter(s=>x.has(s.id));for(const s of t)await K(s.id,s.resume_filename);F(new Set),B(`Successfully downloaded ${t.length} resume(s)`),setTimeout(()=>B(""),3e3)},Re=()=>{let t=[];switch(le){case"all":t=u;break;case"filtered":t=b;break;case"selected":t=b.filter(s=>x.has(s.id));break}if(t.length===0){alert("No data to export");return}re(!0);try{if(ae==="csv"){const s=[];m.filename&&s.push("Filename"),m.company&&s.push("Company"),m.jobTitle&&s.push("Job Title"),m.dateApplied&&s.push("Date Applied"),m.status&&s.push("Status"),m.notes&&s.push("Notes"),m.createdAt&&s.push("Created At");const a=[s.join(","),...t.map(i=>{const r=[];return m.filename&&r.push(`"${i.resume_filename}"`),m.company&&r.push(`"${i.company_name}"`),m.jobTitle&&r.push(`"${i.job_title}"`),m.dateApplied&&r.push(`"${i.date_applied}"`),m.status&&r.push(`"${i.status||"N/A"}"`),m.notes&&r.push(`"${i.notes||"N/A"}"`),m.createdAt&&r.push(`"${i.created_at||i.date_applied}"`),r.join(",")})].join(`
`),c=new Blob([a],{type:"text/csv"}),n=URL.createObjectURL(c),d=document.createElement("a");d.href=n,d.download=`resumes-${new Date().toISOString().split("T")[0]}.csv`,d.click(),URL.revokeObjectURL(n)}else{const s=t.map(d=>{const i={};return m.filename&&(i.filename=d.resume_filename),m.company&&(i.company=d.company_name),m.jobTitle&&(i.jobTitle=d.job_title),m.dateApplied&&(i.dateApplied=d.date_applied),m.status&&(i.status=d.status||"N/A"),m.notes&&(i.notes=d.notes||"N/A"),m.createdAt&&(i.createdAt=d.created_at||d.date_applied),i}),a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),c=URL.createObjectURL(a),n=document.createElement("a");n.href=c,n.download=`resumes-${new Date().toISOString().split("T")[0]}.json`,n.click(),URL.revokeObjectURL(c)}B(`Successfully exported ${t.length} resume(s)`),setTimeout(()=>B(""),3e3),L(!1)}catch(s){console.error("Export error:",s),alert("Failed to export data")}finally{re(!1)}},X=({tab:t,label:s,count:a})=>e.jsxs("button",{onClick:()=>A(t),className:`
        px-6 py-3 font-medium text-sm border-b-2 transition-all duration-200
        ${$===t?"border-neutral-900 text-neutral-900 bg-white":"border-transparent text-neutral-600 hover:text-neutral-900 hover:bg-neutral-50"}
      `,children:[s,a!==void 0&&e.jsx("span",{className:`
          ml-2 px-2 py-0.5 text-xs rounded-full font-medium
          ${$===t?"bg-neutral-100 text-neutral-700":"bg-neutral-200 text-neutral-600"}
        `,children:a})]}),V=({field:t,children:s,className:a=""})=>e.jsxs(l.button,{onClick:()=>ce(t),className:`flex items-center gap-2 font-medium text-neutral-700 hover:text-neutral-900 transition-colors ${a}`,whileHover:{scale:1.02},children:[s,g.field===t&&e.jsx(l.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-neutral-500",children:g.direction==="asc"?e.jsx(pe,{className:"h-4 w-4"}):e.jsx(be,{className:"h-4 w-4"})})]}),Y=({title:t,value:s,icon:a,color:c="neutral",onClick:n,subtitle:d})=>{const i={neutral:"border-neutral-200 bg-neutral-50 text-neutral-600",blue:"border-blue-200 bg-blue-50 text-blue-600",green:"border-green-200 bg-green-50 text-green-600",purple:"border-purple-200 bg-purple-50 text-purple-600",orange:"border-orange-200 bg-orange-50 text-orange-600"};return e.jsx(l.div,{className:`${n?"cursor-pointer":""} card-interactive`,onClick:n,whileHover:n?{y:-2}:{},children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-neutral-600",children:t}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900 mt-1",children:s}),d&&e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:d})]}),e.jsx("div",{className:`p-3 rounded-lg border ${i[c]}`,children:e.jsx(a,{className:"h-6 w-6"})})]})})})},me={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},k={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return e.jsxs(l.div,{className:"space-y-8",variants:me,initial:"hidden",animate:"visible",children:[e.jsx(xe,{children:ie&&e.jsxs(l.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-4 right-4 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5"}),ie]})}),e.jsx(l.div,{variants:k,className:"relative",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Resumes"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-neutral-100 rounded-full border border-neutral-200",children:[e.jsx(M,{className:"h-4 w-4 text-neutral-600"}),e.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"Resume Library"})]})]}),e.jsx("p",{className:"text-sm text-neutral-600",children:"View and manage all your submitted resumes"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(l.button,{onClick:()=>L(!0),className:"px-4 py-2 bg-white border border-neutral-300 hover:bg-neutral-50 text-neutral-700 rounded-lg font-medium text-sm transition-colors flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(E,{className:"h-4 w-4"}),"Export"]})})]})}),e.jsxs(l.div,{variants:k,className:"flex items-end gap-0 border-b border-neutral-200",children:[e.jsx(X,{tab:"templates",label:"Template Resumes"}),e.jsx(X,{tab:"resumes",label:"Resumes",count:u.length}),e.jsx(X,{tab:"stats",label:"Analytics & Stats"})]}),$==="templates"&&e.jsx(l.div,{variants:k,className:"space-y-6",children:e.jsx(He,{fileType:"resume",title:"Resume Templates"})}),$==="stats"&&e.jsxs(l.div,{variants:k,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-neutral-900 mb-4",children:"Resume Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(Y,{title:"Total Resumes",value:j.total,icon:M,color:"blue",onClick:()=>{A("resumes"),I()}}),e.jsx(Y,{title:"Companies Applied",value:j.uniqueCompanies,icon:ee,color:"green",onClick:()=>{A("resumes"),I()}}),e.jsx(Y,{title:"Recent Uploads",value:j.recentUploads,icon:Ee,color:"purple",subtitle:"Last 7 days",onClick:()=>{A("resumes"),O("week")}}),e.jsx(Y,{title:"Total Job Roles",value:j.topJobTitles.length,icon:Z,color:"orange"})]})]}),Object.keys(j.byCompany).length>0&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-neutral-900 mb-4 flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5 text-neutral-600"}),"Resumes by Company"]}),e.jsx("div",{className:"space-y-3",children:Object.entries(j.byCompany).sort(([,t],[,s])=>s-t).slice(0,8).map(([t,s])=>{const a=(s/j.total*100).toFixed(1);return e.jsxs(l.div,{className:"flex items-center justify-between p-3 bg-neutral-50 rounded-lg cursor-pointer hover:bg-neutral-100 transition-colors",onClick:()=>{A("resumes"),U(t)},whileHover:{scale:1.02},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"font-medium text-neutral-900 truncate",children:t})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-600",children:[e.jsxs("span",{children:[s," resume",s!==1?"s":""]}),e.jsxs("span",{className:"text-xs text-neutral-500",children:["(",a,"%)"]})]})]},t)})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-neutral-900 mb-4 flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-neutral-600"}),"Most Applied Job Titles"]}),e.jsx("div",{className:"space-y-3",children:j.topJobTitles.slice(0,8).map((t,s)=>{const a=(t.count/j.total*100).toFixed(1);return e.jsxs(l.div,{className:"flex items-center justify-between p-3 bg-neutral-50 rounded-lg cursor-pointer hover:bg-neutral-100 transition-colors",onClick:()=>{A("resumes"),J(t.title)},whileHover:{scale:1.02},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s===0?"bg-green-500":s===1?"bg-blue-500":s===2?"bg-purple-500":"bg-neutral-400"}`}),e.jsx("span",{className:"font-medium text-neutral-900 truncate",children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-600",children:[e.jsxs("span",{children:[t.count," resume",t.count!==1?"s":""]}),e.jsxs("span",{className:"text-xs text-neutral-500",children:["(",a,"%)"]})]})]},t.title)})})]})]})]}),$==="resumes"&&e.jsx(l.div,{variants:k,className:"space-y-6",children:u&&u.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-neutral-900",children:"Application Resumes"}),e.jsxs("p",{className:"text-sm text-neutral-600",children:["Showing ",y.length," of ",b.length," resumes",b.length!==u.length&&` (${u.length} total)`]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex border border-neutral-200 rounded-lg p-1",children:[e.jsx(l.button,{onClick:()=>se("cards"),className:`p-2 rounded ${q==="cards"?"bg-neutral-900 text-white":"text-neutral-600 hover:text-neutral-900"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(Ue,{className:"h-4 w-4"})}),e.jsx(l.button,{onClick:()=>se("table"),className:`p-2 rounded ${q==="table"?"bg-neutral-900 text-white":"text-neutral-600 hover:text-neutral-900"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(Je,{className:"h-4 w-4"})})]})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Pe,{className:"h-4 w-4 text-neutral-600"}),e.jsx("h4",{className:"font-medium text-neutral-900",children:"Advanced Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{className:"relative lg:col-span-2",children:[e.jsx(je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),e.jsx("input",{type:"text",placeholder:"Search filename, company, job title...",value:v,onChange:t=>W(t.target.value),className:"input-field pl-10"})]}),e.jsxs("select",{value:_,onChange:t=>U(t.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"All Companies"}),ke.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:S,onChange:t=>J(t.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"All Job Titles"}),_e.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:g.field,onChange:t=>ce(t.target.value),className:"input-field flex-1",children:[e.jsx("option",{value:"date_applied",children:"Date Applied"}),e.jsx("option",{value:"company_name",children:"Company"}),e.jsx("option",{value:"job_title",children:"Job Title"}),e.jsx("option",{value:"resume_filename",children:"Filename"}),e.jsx("option",{value:"relevance",children:"Relevance"}),e.jsx("option",{value:"created_at",children:"Upload Date"})]}),e.jsx(l.button,{onClick:()=>G(t=>({...t,direction:t.direction==="asc"?"desc":"asc"})),className:"btn-secondary px-3",whileHover:{scale:1.02},whileTap:{scale:.98},children:g.direction==="asc"?e.jsx(pe,{className:"h-4 w-4"}):e.jsx(be,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("select",{value:T,onChange:t=>{O(t.target.value),t.target.value!=="custom"?(Q(!1),P(""),z("")):Q(!0)},className:"input-field",children:[e.jsx("option",{value:"",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"Past Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"last-30",children:"Last 30 Days"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"last-90",children:"Last 90 Days"}),e.jsx("option",{value:"year",children:"This Year"}),e.jsx("option",{value:"custom",children:"Custom Range"})]}),ge&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:w,onChange:t=>P(t.target.value),className:"input-field",placeholder:"From date"}),e.jsx("input",{type:"date",value:N,onChange:t=>z(t.target.value),className:"input-field",placeholder:"To date"})]})]}),(v||_||S||T||w||N||g.field!=="date_applied"||g.direction!=="desc")&&e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-neutral-200",children:[e.jsx("span",{className:"text-sm text-neutral-600",children:"Active filters:"}),v&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full flex items-center gap-1",children:["Search: ",v,e.jsx("button",{onClick:()=>W(""),children:e.jsx(R,{className:"h-3 w-3"})})]}),_&&e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full flex items-center gap-1",children:["Company: ",_,e.jsx("button",{onClick:()=>U(""),children:e.jsx(R,{className:"h-3 w-3"})})]}),S&&e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full flex items-center gap-1",children:["Job Title: ",S,e.jsx("button",{onClick:()=>J(""),children:e.jsx(R,{className:"h-3 w-3"})})]}),T&&e.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full flex items-center gap-1",children:["Date: ",T,e.jsx("button",{onClick:de,children:e.jsx(R,{className:"h-3 w-3"})})]}),(w||N)&&e.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full flex items-center gap-1",children:["Custom: ",w||"Start"," - ",N||"End",e.jsx("button",{onClick:de,children:e.jsx(R,{className:"h-3 w-3"})})]}),e.jsx(l.button,{onClick:I,className:"text-xs text-neutral-600 hover:text-neutral-900 underline ml-auto",whileHover:{scale:1.02},children:"Clear all"})]})]}),x.size>0&&e.jsx(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[x.size," resume",x.size!==1?"s":""," selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(l.button,{onClick:Ae,className:"btn-secondary text-sm",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(E,{className:"h-4 w-4 mr-1"}),"Download All"]}),e.jsx(l.button,{onClick:()=>F(new Set),className:"text-sm text-neutral-600 hover:text-neutral-900",whileHover:{scale:1.02},children:"Cancel"})]})]})}),Ce?e.jsx("div",{className:q==="cards"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:Array.from({length:6}).map((t,s)=>e.jsxs("div",{className:"card p-6 animate-pulse",children:[e.jsx("div",{className:"h-5 bg-neutral-200 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-4 bg-neutral-100 rounded w-1/2 mb-3"}),e.jsx("div",{className:"h-4 bg-neutral-100 rounded w-1/2 mb-3"}),e.jsx("div",{className:"h-4 bg-neutral-100 rounded w-1/2 mb-6"}),e.jsx("div",{className:"h-10 bg-neutral-200 rounded-lg w-full"})]},s))}):Te?e.jsxs(l.div,{className:"card p-12 text-center",variants:k,children:[e.jsx("div",{className:"p-4 rounded-full bg-red-100 w-fit mx-auto mb-6",children:e.jsx(M,{className:"h-12 w-12 text-red-500"})}),e.jsx("h3",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"Failed to load resumes"}),e.jsx("p",{className:"text-neutral-600 mb-6",children:"Please try refreshing the page or contact support if the problem persists."}),e.jsx(l.button,{onClick:()=>window.location.reload(),className:"btn-primary",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Refresh Page"})]}):b.length===0?e.jsxs(l.div,{className:"card p-12 text-center",variants:k,children:[e.jsx("div",{className:"p-4 rounded-full bg-neutral-100 w-fit mx-auto mb-6",children:e.jsx(je,{className:"h-12 w-12 text-neutral-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"No resumes found"}),e.jsx("p",{className:"text-neutral-600 mb-6",children:"Try adjusting your filters or search terms to find more resumes."}),e.jsx(l.button,{onClick:I,className:"btn-secondary",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Clear Filters"})]}):e.jsxs("div",{className:"space-y-6",children:[q==="cards"?e.jsx(l.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",variants:me,initial:"hidden",animate:"visible",children:y.map((t,s)=>e.jsxs(l.div,{className:"card-interactive group relative",variants:k,transition:{delay:s*.05},whileHover:{y:-4},children:[e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsx(l.button,{onClick:()=>oe(t.id),className:`w-5 h-5 rounded border-2 flex items-center justify-center ${x.has(t.id)?"bg-blue-600 border-blue-600 text-white":"border-neutral-300 bg-white hover:border-neutral-400"}`,whileHover:{scale:1.1},whileTap:{scale:.9},children:x.has(t.id)&&e.jsx(te,{className:"h-3 w-3"})})}),e.jsxs("div",{className:"p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-neutral-100 flex-shrink-0",children:e.jsx(M,{className:"h-5 w-5 text-neutral-600"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:"font-semibold text-lg text-neutral-900 truncate group-hover:text-blue-600 transition-colors",title:t.resume_filename,children:t.resume_filename})})]}),e.jsxs("div",{className:"space-y-3 text-sm text-neutral-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{className:"h-4 w-4 text-neutral-400 flex-shrink-0"}),e.jsx("span",{className:"truncate",title:t.job_title,children:t.job_title})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ee,{className:"h-4 w-4 text-neutral-400 flex-shrink-0"}),e.jsx("span",{className:"truncate",title:t.company_name,children:t.company_name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ze,{className:"h-4 w-4 text-neutral-400 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-neutral-700",children:new Date(t.date_applied).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})]}),e.jsxs(l.button,{onClick:()=>K(t.id,t.resume_filename),className:"mt-6 w-full btn-primary",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Download Resume"]})]})]},t.id))}):e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-neutral-50 border-b border-neutral-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx(l.button,{onClick:De,className:`w-5 h-5 rounded border-2 flex items-center justify-center ${x.size===y.length&&y.length>0||x.size>0?"bg-blue-600 border-blue-600 text-white":"border-neutral-300 bg-white hover:border-neutral-400"}`,whileHover:{scale:1.1},whileTap:{scale:.9},children:x.size===y.length&&y.length>0?e.jsx(te,{className:"h-3 w-3"}):x.size>0?e.jsx(Oe,{className:"h-3 w-3"}):null})}),f.filename&&e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx(V,{field:"resume_filename",children:"Filename"})}),f.company&&e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx(V,{field:"company_name",children:"Company"})}),f.jobTitle&&e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx(V,{field:"job_title",children:"Job Title"})}),f.dateApplied&&e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx(V,{field:"date_applied",children:"Date Applied"})}),f.action&&e.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-neutral-200",children:y.map(t=>e.jsxs(l.tr,{className:"hover:bg-neutral-50 transition-colors",initial:{opacity:0},animate:{opacity:1},children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx(l.button,{onClick:()=>oe(t.id),className:`w-5 h-5 rounded border-2 flex items-center justify-center ${x.has(t.id)?"bg-blue-600 border-blue-600 text-white":"border-neutral-300 bg-white hover:border-neutral-400"}`,whileHover:{scale:1.1},whileTap:{scale:.9},children:x.has(t.id)&&e.jsx(te,{className:"h-3 w-3"})})}),f.filename&&e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-neutral-100",children:e.jsx(M,{className:"h-4 w-4 text-neutral-600"})}),e.jsx("span",{className:"font-medium text-neutral-900 truncate",title:t.resume_filename,children:t.resume_filename})]})}),f.company&&e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-neutral-700",title:t.company_name,children:t.company_name})}),f.jobTitle&&e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-neutral-700",title:t.job_title,children:t.job_title})}),f.dateApplied&&e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-neutral-700",children:new Date(t.date_applied).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})}),f.action&&e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs(l.button,{onClick:()=>K(t.id,t.resume_filename),className:"btn-secondary text-sm",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(E,{className:"h-4 w-4 mr-1"}),"Download"]})})]},t.id))})]})})}),C>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-neutral-600",children:["Showing ",(h-1)*D+1," to ",Math.min(h*D,b.length)," of ",b.length," results"]}),e.jsxs("select",{value:D,onChange:t=>{ye(Number(t.target.value)),H(1)},className:"input-field w-auto",children:[e.jsx("option",{value:5,children:"5 per page"}),e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:25,children:"25 per page"}),e.jsx("option",{value:50,children:"50 per page"}),e.jsx("option",{value:100,children:"100 per page"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l.button,{onClick:()=>H(Math.max(1,h-1)),disabled:h===1,className:"btn-secondary p-2 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:h>1?{scale:1.05}:{},whileTap:h>1?{scale:.95}:{},children:e.jsx(Fe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,C)},(t,s)=>{let a;return C<=5||h<=3?a=s+1:h>=C-2?a=C-4+s:a=h-2+s,e.jsx(l.button,{onClick:()=>H(a),className:`w-8 h-8 rounded text-sm font-medium ${h===a?"bg-neutral-900 text-white":"text-neutral-600 hover:bg-neutral-100"}`,whileHover:{scale:1.1},whileTap:{scale:.9},children:a},a)})}),e.jsx(l.button,{onClick:()=>H(Math.min(C,h+1)),disabled:h===C,className:"btn-secondary p-2 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:h<C?{scale:1.05}:{},whileTap:h<C?{scale:.95}:{},children:e.jsx(Le,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(xe,{children:fe&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>L(!1),children:e.jsxs(l.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:"Export Resumes"}),e.jsx(l.button,{onClick:()=>L(!1),className:"text-neutral-400 hover:text-neutral-600",whileHover:{scale:1.1},children:e.jsx(R,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Export Format"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["csv","json"].map(t=>e.jsx(l.button,{onClick:()=>ve(t),className:`p-3 rounded-lg border text-center ${ae===t?"border-blue-500 bg-blue-50 text-blue-700":"border-neutral-200 hover:border-neutral-300"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:t.toUpperCase()},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"What to Export"}),e.jsx("div",{className:"space-y-2",children:[{value:"all",label:`All resumes (${u.length})`},{value:"filtered",label:`Filtered resumes (${b.length})`},{value:"selected",label:`Selected resumes (${x.size})`}].map(({value:t,label:s})=>e.jsx(l.button,{onClick:()=>we(t),className:`w-full p-3 rounded-lg border text-left ${le===t?"border-blue-500 bg-blue-50 text-blue-700":"border-neutral-200 hover:border-neutral-300"}`,whileHover:{scale:1.01},whileTap:{scale:.99},children:s},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Columns to Include"}),e.jsx("div",{className:"space-y-2",children:Object.entries({filename:"Filename",company:"Company",jobTitle:"Job Title",dateApplied:"Date Applied",status:"Status",notes:"Notes",createdAt:"Created At"}).map(([t,s])=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:m[t],onChange:a=>Ne(c=>({...c,[t]:a.target.checked})),className:"rounded border-neutral-300"}),e.jsx("span",{className:"text-sm text-neutral-700",children:s})]},t))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(l.button,{onClick:()=>L(!1),className:"flex-1 btn-secondary",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancel"}),e.jsx(l.button,{onClick:Re,disabled:ne,className:"flex-1 btn-primary",whileHover:{scale:1.02},whileTap:{scale:.98},children:ne?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Export"]})})]})]})]})})})]})};export{lt as default};
