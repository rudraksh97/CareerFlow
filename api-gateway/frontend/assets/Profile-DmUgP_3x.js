import{u as y,r as o,j as e,m as c,U as v,a as N,e as g}from"./index-0B-QrMym.js";import{u as b}from"./useQuery-gFyUPQ7C.js";import{u as w}from"./useMutation-DdaFRHUm.js";import{a as d}from"./api-BgONvxhD.js";import{M as k}from"./mail-D00ol1xp.js";import{S as _}from"./save-DDhsktxM.js";import{A as S}from"./alert-circle-B5LfcZxN.js";const Q=()=>{const u=y(),[l,m]=o.useState({full_name:"",email:"",headline:"",linkedin_url:""}),[n,t]=o.useState({show:!1,message:"",type:""}),{data:a,isLoading:p}=b({queryKey:["profile"],queryFn:()=>d.get("/profile/").then(s=>s.data)});o.useEffect(()=>{a&&m({full_name:a.full_name||"",email:a.email||"",headline:a.headline||"",linkedin_url:a.linkedin_url||""})},[a]);const r=w({mutationFn:s=>d.post("/profile/",s),onSuccess:()=>{u.invalidateQueries({queryKey:["profile"]}),t({show:!0,message:"Profile saved successfully!",type:"success"}),setTimeout(()=>t({show:!1,message:"",type:""}),3e3)},onError:()=>{t({show:!0,message:"Failed to save profile.",type:"error"}),setTimeout(()=>t({show:!1,message:"",type:""}),3e3)}}),i=s=>{const{name:x,value:f}=s.target;m(j=>({...j,[x]:f}))},h=s=>{s.preventDefault(),r.mutate(l)};return e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-neutral-900",children:"Profile"}),e.jsx("p",{className:"text-neutral-600 mt-1",children:"Manage your personal information"})]}),e.jsx("div",{className:"card max-w-2xl p-8",children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(v,{className:"h-4 w-4 text-neutral-400"})}),e.jsx("input",{type:"text",name:"full_name",id:"full_name",className:"form-input pl-10",value:l.full_name,onChange:i,placeholder:"e.g., John Doe"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(k,{className:"h-4 w-4 text-neutral-400"})}),e.jsx("input",{type:"email",name:"email",id:"email",className:"form-input pl-10",value:l.email,onChange:i,placeholder:"e.g., john.doe@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"headline",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Headline"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(N,{className:"h-4 w-4 text-neutral-400"})}),e.jsx("input",{type:"text",name:"headline",id:"headline",className:"form-input pl-10",value:l.headline,onChange:i,placeholder:"e.g., Senior Software Engineer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"linkedin_url",className:"block text-sm font-medium text-neutral-700 mb-2",children:"LinkedIn URL"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(g,{className:"h-4 w-4 text-neutral-400"})}),e.jsx("input",{type:"url",name:"linkedin_url",id:"linkedin_url",className:"form-input pl-10",value:l.linkedin_url,onChange:i,placeholder:"e.g., https://linkedin.com/in/johndoe"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",className:"btn-primary",disabled:p||r.isPending,children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),r.isPending?"Saving...":"Save Profile"]})})]})}),n.show&&e.jsxs(c.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:20,transition:{duration:.2}},className:`fixed bottom-5 right-5 flex items-center p-4 rounded-lg shadow-lg text-white ${n.type==="success"?"bg-green-500":"bg-red-500"}`,children:[e.jsx(S,{className:"h-5 w-5 mr-3"}),n.message]})]})};export{Q as default};
