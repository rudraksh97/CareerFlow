import{c as d,u as Y,r as a,j as e,m as s,A as E,S as J,U as W,I as g,V as X,X as Z}from"./index-0B-QrMym.js";import{u as ee}from"./useQuery-gFyUPQ7C.js";import{u as te}from"./useMutation-DdaFRHUm.js";import{a as T}from"./api-BgONvxhD.js";import{C as se,D as I}from"./download-BfIeGHGd.js";import{R as ae}from"./rotate-cw-BU4PmOrm.js";import{S as ne}from"./save-DDhsktxM.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=d("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=d("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=d("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=d("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=d("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=d("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),be=()=>{const K=Y(),[f,w]=a.useState(""),[v,R]=a.useState(!1),[x,M]=a.useState("general"),[h,O]=a.useState(!0),[p,_]=a.useState(!0),[k,L]=a.useState("12"),[S,U]=a.useState("system"),[$,m]=a.useState(!1),[C,z]=a.useState("json"),[A,i]=a.useState(""),{data:b,isLoading:j}=ee({queryKey:["settings","openai_api_key"],queryFn:()=>T.get("/settings/openai_api_key").then(t=>t.data),retry:(t,c)=>{var n;return((n=c.response)==null?void 0:n.status)===404?!1:t<3}});a.useEffect(()=>{b&&b.value&&w(b.value)},[b]);const l=te({mutationFn:t=>T.post("/settings/",{key:"openai_api_key",value:t}),onSuccess:()=>{K.invalidateQueries({queryKey:["settings","openai_api_key"]}),i("API Key saved successfully!"),setTimeout(()=>i(""),3e3)},onError:()=>{i("Failed to save API Key."),setTimeout(()=>i(""),3e3)}}),V=t=>{t.preventDefault(),l.mutate(f)},F=()=>{const t={openai_api_key:f?"***REDACTED***":"",email_notifications:h,auto_save:p,data_retention:k,theme:S,exported_at:new Date().toISOString()};C==="json"?H(t):q(t),m(!1),i("Settings exported successfully!"),setTimeout(()=>i(""),3e3)},H=t=>{const c=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=window.URL.createObjectURL(c),r=document.createElement("a");r.href=n,r.download=`pats-settings-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},q=t=>{const n=[["Setting","Value"].join(","),...Object.entries(t).map(([G,Q])=>[`"${G}"`,`"${Q}"`].join(","))].join(`
`),r=new Blob([n],{type:"text/csv"}),P=window.URL.createObjectURL(r),u=document.createElement("a");u.href=P,u.download=`pats-settings-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(P)},y=({tab:t,label:c,icon:n})=>e.jsxs("button",{onClick:()=>M(t),className:`
        px-6 py-3 font-medium text-sm border-b-2 transition-all duration-200 flex items-center gap-2
        ${x===t?"border-neutral-900 text-neutral-900 bg-white":"border-transparent text-neutral-600 hover:text-neutral-900 hover:bg-neutral-50"}
      `,children:[e.jsx(n,{className:"h-4 w-4"}),c]}),B={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},o={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return e.jsxs(s.div,{className:"space-y-4",variants:B,initial:"hidden",animate:"visible",children:[e.jsx(E,{children:A&&e.jsxs(s.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-4 right-4 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),A]})}),e.jsx(s.div,{variants:o,className:"relative",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:"Settings"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-neutral-100 rounded-full border border-neutral-200",children:[e.jsx(J,{className:"h-4 w-4 text-neutral-600"}),e.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"Configuration"})]})]}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Manage your application settings and preferences"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(s.button,{onClick:()=>m(!0),className:"px-4 py-2 bg-white border border-neutral-300 hover:bg-neutral-50 text-neutral-700 rounded-lg font-medium text-sm transition-colors flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(I,{className:"h-4 w-4"}),"Export Settings"]})})]})}),e.jsxs(s.div,{variants:o,className:"flex items-end gap-0 border-b border-neutral-200",children:[e.jsx(y,{tab:"general",label:"General",icon:W}),e.jsx(y,{tab:"api",label:"API Keys",icon:N}),e.jsx(y,{tab:"privacy",label:"Privacy",icon:D}),e.jsx(y,{tab:"about",label:"About",icon:g})]}),x==="general"&&e.jsx(s.div,{variants:o,className:"space-y-6",children:e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"General Preferences"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-neutral-700",children:"Email Notifications"}),e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Receive email updates about your applications"})]}),e.jsx(s.button,{onClick:()=>O(!h),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${h?"bg-neutral-900":"bg-neutral-300"}`,whileTap:{scale:.95},children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${h?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-neutral-700",children:"Auto Save"}),e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Automatically save changes as you type"})]}),e.jsx(s.button,{onClick:()=>_(!p),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${p?"bg-neutral-900":"bg-neutral-300"}`,whileTap:{scale:.95},children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${p?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:[e.jsx(oe,{className:"h-4 w-4 inline mr-1"}),"Theme Preference"]}),e.jsxs("select",{value:S,onChange:t=>U(t.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[e.jsx("option",{value:"system",children:"System Default"}),e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"})]})]})]})]})}),x==="api"&&e.jsx(s.div,{variants:o,className:"space-y-6",children:e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 mb-2 flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-blue-600"}),"OpenAI Configuration"]}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Configure your OpenAI API key to enable AI-powered features like cover letter generation and message personalization."})]}),e.jsxs("form",{onSubmit:V,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"apiKey",className:"block text-sm font-medium text-neutral-700 mb-2",children:"OpenAI API Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:v?"text":"password",id:"apiKey",value:f,onChange:t=>w(t.target.value),className:"w-full px-3 py-2 pr-20 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"sk-...",disabled:j||l.isPending}),e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center gap-1 pr-3",children:[e.jsx(s.button,{type:"button",onClick:()=>R(!v),className:"p-1 text-neutral-400 hover:text-neutral-600",whileHover:{scale:1.1},children:v?e.jsx(re,{className:"h-4 w-4"}):e.jsx(ie,{className:"h-4 w-4"})}),e.jsx(N,{className:"h-4 w-4 text-neutral-400"})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(g,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Security Note"}),e.jsx("p",{children:"Your API key is encrypted and stored securely on the server. It's never exposed in the frontend or logs."})]})]})})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-neutral-200",children:e.jsxs(s.button,{type:"submit",className:"px-4 py-2 bg-neutral-900 hover:bg-neutral-800 disabled:bg-neutral-400 text-white rounded-lg font-medium transition-colors flex items-center gap-2",disabled:j||l.isPending,whileHover:{scale:j||l.isPending?1:1.02},whileTap:{scale:j||l.isPending?1:.98},children:[l.isPending?e.jsx(ae,{className:"h-4 w-4 animate-spin"}):e.jsx(ne,{className:"h-4 w-4"}),l.isPending?"Saving...":"Save Configuration"]})})]})]})}),x==="privacy"&&e.jsx(s.div,{variants:o,className:"space-y-6",children:e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 mb-4 flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-green-600"}),"Privacy & Data"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:[e.jsx(le,{className:"h-4 w-4 inline mr-1"}),"Data Retention Period"]}),e.jsxs("select",{value:k,onChange:t=>L(t.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[e.jsx("option",{value:"6",children:"6 months"}),e.jsx("option",{value:"12",children:"12 months"}),e.jsx("option",{value:"24",children:"24 months"}),e.jsx("option",{value:"forever",children:"Keep forever"})]}),e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"How long to keep your application data before automatic deletion"})]}),e.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-neutral-900 mb-2",children:"Privacy Protection"}),e.jsxs("ul",{className:"text-xs text-neutral-600 space-y-1",children:[e.jsx("li",{children:"• Your data is encrypted at rest and in transit"}),e.jsx("li",{children:"• We never share your personal information with third parties"}),e.jsx("li",{children:"• You can export or delete your data at any time"}),e.jsx("li",{children:"• API keys are stored with enterprise-grade encryption"})]})]})]})]})}),x==="about"&&e.jsxs(s.div,{variants:o,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 mb-2 flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-blue-600"}),"Application Information"]}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Current version and build information for this application."})]}),e.jsx(X,{showDetails:!0})]}),e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"About PATS"}),e.jsxs("div",{className:"prose prose-sm text-neutral-600",children:[e.jsx("p",{children:"Personal Application Tracking System (PATS) is a comprehensive job application management platform designed to streamline your job search process."}),e.jsx("h5",{className:"font-medium text-neutral-900 mt-4 mb-2",children:"Key Features"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsx("li",{children:"• Track job applications and their status"}),e.jsx("li",{children:"• Manage contacts and networking relationships"}),e.jsx("li",{children:"• Generate personalized cover letters and referral messages"}),e.jsx("li",{children:"• Analytics and insights on your job search progress"}),e.jsx("li",{children:"• Resume and document management"})]})]})]})]}),e.jsx(E,{children:$&&e.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>m(!1),children:e.jsxs(s.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:"Export Settings"}),e.jsx(s.button,{onClick:()=>m(!1),className:"text-neutral-400 hover:text-neutral-600",whileHover:{scale:1.1},children:e.jsx(Z,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Export Format"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["json","csv"].map(t=>e.jsx(s.button,{onClick:()=>z(t),className:`p-3 rounded-lg border text-center ${C===t?"border-blue-500 bg-blue-50 text-blue-700":"border-neutral-200 hover:border-neutral-300"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:t.toUpperCase()},t))})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(g,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-amber-800",children:"API keys will be redacted in the export for security purposes."})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(s.button,{onClick:()=>m(!1),className:"flex-1 px-4 py-2 bg-white border border-neutral-300 hover:bg-neutral-50 text-neutral-700 rounded-lg font-medium transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancel"}),e.jsxs(s.button,{onClick:F,className:"flex-1 px-4 py-2 bg-neutral-900 hover:bg-neutral-800 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(I,{className:"h-4 w-4"}),"Export"]})]})]})]})})})]})};export{be as default};
